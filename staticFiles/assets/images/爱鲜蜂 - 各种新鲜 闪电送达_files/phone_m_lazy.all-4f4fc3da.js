;window._bee_jsLoaded=window._bee_jsLoaded||{};window._bee_jsLoaded["phone_m_lazy.all.js"]=1;
/*!File[lib/Performance.js]*/define("lib/Performance",["lib/base"],function(n){var e={logid:SYS_CONF.logid,g_uniqid:n.safeGetProp(SYS_CONF,"userInfo.beeId")},i=window.SYS_PERFORMANCE?window.SYS_PERFORMANCE.headStart:!1,r=!1,t=function(){return 1*new Date},o=function(){if(window.performance&&$.isFunction(window.performance.getEntries))for(var n=0,i=window.performance.getEntries(),r=i.length;r>n;n++){var t,o=i[n],a=o.name,d=Math.round(o.duration),w=30>d;if(t=a.match(/beequick\.cn\/static\/.+\/([^\/]+\.(?:js|css))/)){var c=t[1].replace(/\-[0-9a-f]{8}/,"");e["r_"+c]=w?0:d}}},a=function(n,r){if(i&&window.performance&&window.performance.timing){var t=window.performance.timing,o=t.fetchStart,a=t[n],d=a-i,w=a==o?1:0;o&&a&&(e["t_"+n]=r&&w?0:d)}},d=function(){if(!i)return this;var n=window.SYS_PERFORMANCE.pageName,r=n.indexOf(".");return e.pageName=-1==r?n:n.substring(0,r),e.t_head=window.SYS_PERFORMANCE.bodyStart-i,window.SYS_PERFORMANCE.wxRedirectTime&&(e.t_wxRedirectTime=-window.SYS_PERFORMANCE.wxRedirectTime),$(w("ready",!0)),$(window).on("load",w("load",!0)),window.screen&&(e.screen=window.screen.width+"x"+window.screen.height),this},w=function(n,r){var o=function(){var r="t_"+n,o=t();return e[r]?this:void(e[r]=o-i)};return r?o:(o(),this)},c=function(n,i){return e[n]?this:(e[n]=i,this)},f=function(){r||(r=!0,a("navigationStart"),a("domainLookupEnd",!0),a("connectEnd",!0),a("responseEnd"),o(),n.imgRequest(window.SYS_CONF.domain.clicklog+"/performance.gif?"+$.param(e)))};return{init:d,makeTime:w,addData:c,report:f}});
/*!File[thirdpart/mobiscroll.custom-2.15.1.min.js]*/if(!window.jQuery){var jQuery=Zepto;!function(e){["width","height"].forEach(function(t){e.fn[t]=function(a){var n,s=document.body,i=document.documentElement,o=t.replace(/./,function(e){return e[0].toUpperCase()});return void 0===a?this[0]==window?i["client"+o]:this[0]==document?Math.max(s["scroll"+o],s["offset"+o],i["client"+o],i["scroll"+o],i["offset"+o]):(n=this.offset())&&n[t]:this.each(function(){e(this).css(t,a)})}}),["width","height"].forEach(function(t){var a=t.replace(/./,function(e){return e[0].toUpperCase()});e.fn["outer"+a]=function(e){var n=this;if(n){var s=n[0]["offset"+a];return{width:["left","right"],height:["top","bottom"]}[t].forEach(function(t){e&&(s+=parseInt(n.css("margin-"+t),10))}),s}return null}}),["width","height"].forEach(function(t){var a=t.replace(/./,function(e){return e[0].toUpperCase()});e.fn["inner"+a]=function(){var e=this;if(e[0]["inner"+a])return e[0]["inner"+a];var n=e[0]["offset"+a];return{width:["left","right"],height:["top","bottom"]}[t].forEach(function(t){n-=parseInt(e.css("border-"+t+"-width"),10)}),n}}),["Left","Top"].forEach(function(t,a){function n(e){return e&&"object"==typeof e&&"setInterval"in e?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var s="scroll"+t;e.fn[s]=function(t){var i,o;return void 0===t?(i=this[0],i?(o=n(i))?"pageXOffset"in o?o[a?"pageYOffset":"pageXOffset"]:o.document.documentElement[s]||o.document.body[s]:i[s]:null):void this.each(function(){if(o=n(this)){var i=a?e(o).scrollLeft():t,l=a?t:e(o).scrollTop();o.scrollTo(i,l)}else this[s]=t})}}),e.fn.prevUntil=function(t){for(var a=this,n=[];a.length&&!e(a).filter(t).length;)n.push(a[0]),a=a.prev();return e(n)},e.fn.nextUntil=function(t){for(var a=this,n=[];a.length&&!a.filter(t).length;)n.push(a[0]),a=a.next();return e(n)},e._extend=e.extend,e.extend=function(){return arguments[0]=arguments[0]||{},e._extend.apply(this,arguments)}}(jQuery)}!function(e,t){function a(e){for(var a in e)if(l[e[a]]!==t)return!0;return!1}function n(a,n,s){var o=a;return"object"==typeof n?a.each(function(){i[this.id]&&i[this.id].destroy(),new e.mobiscroll.classes[n.component||"Scroller"](this,n)}):("string"==typeof n&&a.each(function(){var e;return(e=i[this.id])&&e[n]&&(e=e[n].apply(this,Array.prototype.slice.call(s,1)),e!==t)?(o=e,!1):void 0}),o)}var s=+new Date,i={},o=e.extend,l=document.createElement("modernizr").style,r=a(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]),c=a(["flex","msFlex","WebkitBoxDirection"]),d=function(){var e,t=["Webkit","Moz","O","ms"];for(e in t)if(a([t[e]+"Transform"]))return"-"+t[e].toLowerCase()+"-";return""}(),u=d.replace(/^\-/,"").replace(/\-$/,"").replace("moz","Moz");e.fn.mobiscroll=function(t){return o(this,e.mobiscroll.components),n(this,t,arguments)},e.mobiscroll=e.mobiscroll||{version:"2.15.1",util:{prefix:d,jsPrefix:u,has3d:r,hasFlex:c,testTouch:function(t,a){if("touchstart"==t.type)e(a).attr("data-touch","1");else if(e(a).attr("data-touch"))return e(a).removeAttr("data-touch"),!1;return!0},objectToArray:function(e){var t,a=[];for(t in e)a.push(e[t]);return a},arrayToObject:function(e){var t,a={};if(e)for(t=0;t<e.length;t++)a[e[t]]=e[t];return a},isNumeric:function(e){return 0<=e-parseFloat(e)},isString:function(e){return"string"==typeof e},getCoord:function(e,t){var a=e.originalEvent||e;return a.changedTouches?a.changedTouches[0]["page"+t]:e["page"+t]},getPosition:function(a,n){var s,i,o=window.getComputedStyle?getComputedStyle(a[0]):a[0].style;return r?(e.each(["t","webkitT","MozT","OT","msT"],function(e,a){return o[a+"ransform"]!==t?(s=o[a+"ransform"],!1):void 0}),s=s.split(")")[0].split(", "),i=n?s[13]||s[5]:s[12]||s[4]):i=n?o.top.replace("px",""):o.left.replace("px",""),i},constrain:function(e,t,a){return Math.max(t,Math.min(e,a))},vibrate:function(e){"vibrate"in navigator&&navigator.vibrate(e||50)}},tapped:!1,autoTheme:"mobiscroll",presets:{scroller:{},numpad:{},listview:{},menustrip:{}},themes:{frame:{},listview:{},menustrip:{}},i18n:{},instances:i,classes:{},components:{},defaults:{context:"body",mousewheel:!0,vibrate:!0},setDefaults:function(e){o(this.defaults,e)},presetShort:function(e,a,s){this.components[e]=function(i){return n(this,o(i,{component:a,preset:!1===s?t:e}),arguments)}}},e.mobiscroll.classes.Base=function(t,a){var n,l,r,c,d,u,h=e.mobiscroll,f=this;f.settings={},f._presetLoad=function(){},f._init=function(e){r=f.settings,o(a,e),f._hasDef&&(u=h.defaults),o(r,f._defaults,u,a),f._hasTheme&&(d=r.theme,"auto"!=d&&d||(d=h.autoTheme),"default"==d&&(d="mobiscroll"),a.theme=d,c=h.themes[f._class][d]),f._hasLang&&(n=h.i18n[r.lang]),f._hasTheme&&f.trigger("onThemeLoad",[n,a]),o(r,c,n,u,a),f._hasPreset&&(f._presetLoad(r),l=h.presets[f._class][r.preset])&&(l=l.call(t,f),o(r,l,a))},f._destroy=function(){f.trigger("onDestroy",[]),delete i[t.id],f=null},f.trigger=function(n,s){var i;return s.push(f),e.each([u,c,l,a],function(e,a){a&&a[n]&&(i=a[n].apply(t,s))}),i},f.option=function(e,t){var a={};"object"==typeof e?a=e:a[e]=t,f.init(a)},f.getInst=function(){return f},a=a||{},t.id||(t.id="mobiscroll"+ ++s),i[t.id]=f}}(jQuery),function(e,t,a,n){var s,i,o=e.mobiscroll,l=o.instances,r=o.util,c=r.jsPrefix,d=r.has3d,u=r.getCoord,h=r.constrain,f=r.isString,p=/android [1-3]/i.test(navigator.userAgent),r=/(iphone|ipod|ipad).* os 8_/i.test(navigator.userAgent),w=function(){},v=function(e){e.preventDefault()};o.classes.Frame=function(r,m,b){function g(t){q&&q.removeClass("dwb-a"),q=e(this),!q.hasClass("dwb-d")&&!q.hasClass("dwb-nhl")&&q.addClass("dwb-a"),"mousedown"===t.type&&e(a).on("mouseup",y)}function y(t){q&&(q.removeClass("dwb-a"),q=null),"mouseup"===t.type&&e(a).off("mouseup",y)}function _(e){13==e.keyCode?$.select():27==e.keyCode&&$.cancel()}function x(t){var a,r,c,d=R.focusOnClose;M.remove(),s&&!t&&setTimeout(function(){if(d===n||!0===d){i=!0,a=s[0],c=a.type,r=a.value;try{a.type="button"}catch(t){}s.focus(),a.type=c,a.value=r}else d&&(l[e(d).attr("id")]&&(o.tapped=!1),e(d).focus())},200),$._isVisible=!1,E("onHide",[])}function C(e){clearTimeout(J[e.type]),J[e.type]=setTimeout(function(){var t="scroll"==e.type;(!t||Y)&&$.position(!t)},200)}function V(e){O[0].contains(e.target)||O.focus()}function T(t,n){o.tapped||(t&&t(),e(a.activeElement).is("input,textarea")&&e(a.activeElement).blur(),s=n,$.show()),setTimeout(function(){i=!1},300)}var k,A,W,M,P,S,O,D,I,L,q,j,E,F,z,H,U,B,Q,R,Y,X,G,N,$=this,K=e(r),Z=[],J={};o.classes.Base.call(this,r,m,!0),$.position=function(t){var s,i,o,l,r,c,d,u,f,p,w=0,v=0;f={};var m=Math.min(D[0].innerWidth||D.innerWidth(),S.width()),b=D[0].innerHeight||D.innerHeight();G===m&&N===b&&t||Q||(($._isFullScreen||/top|bottom/.test(R.display))&&O.width(m),!1!==E("onPosition",[M,m,b])&&z&&(i=D.scrollLeft(),t=D.scrollTop(),l=R.anchor===n?K:e(R.anchor),$._isLiquid&&"liquid"!==R.layout&&(400>m?M.addClass("dw-liq"):M.removeClass("dw-liq")),!$._isFullScreen&&/modal|bubble/.test(R.display)&&(I.width(""),e(".mbsc-w-p",M).each(function(){s=e(this).outerWidth(!0),w+=s,v=s>v?s:v}),s=w>m?v:w,I.width(s).css("white-space",w>m?"":"nowrap")),H=$._isFullScreen?m:O.outerWidth(),U=$._isFullScreen?b:O.outerHeight(!0),Y=b>=U&&m>=H,$.scrollLock=Y,"modal"==R.display?(i=Math.max(0,i+(m-H)/2),o=t+(b-U)/2):"bubble"==R.display?(p=!0,u=e(".dw-arrw-i",M),o=l.offset(),c=Math.abs(A.offset().top-o.top),d=Math.abs(A.offset().left-o.left),r=l.outerWidth(),l=l.outerHeight(),i=h(d-(O.outerWidth(!0)-r)/2,i+3,i+m-H-3),o=c-U,t>o||c>t+b?(O.removeClass("dw-bubble-top").addClass("dw-bubble-bottom"),o=c+l):O.removeClass("dw-bubble-bottom").addClass("dw-bubble-top"),u=u.outerWidth(),r=h(d+r/2-(i+(H-u)/2),0,u),e(".dw-arr",M).css({left:r})):"top"==R.display?o=t:"bottom"==R.display&&(o=t+b-U),o=0>o?0:o,f.top=o,f.left=i,O.css(f),S.height(0),f=Math.max(o+U,"body"==R.context?e(a).height():A[0].scrollHeight),S.css({height:f}),p&&(o+U>t+b||c>t+b)&&(Q=!0,setTimeout(function(){Q=!1},300),D.scrollTop(Math.min(o+U-b,f-b))),G=m,N=b))},$.attachShow=function(e,t){Z.push({readOnly:e.prop("readonly"),el:e}),"inline"!==R.display&&(X&&e.is("input")&&e.prop("readonly",!0).on("mousedown.dw",function(e){e.preventDefault()}),R.showOnFocus&&e.on("focus.dw",function(){i||T(t,e)}),R.showOnTap&&(e.on("keydown.dw",function(a){(32==a.keyCode||13==a.keyCode)&&(a.preventDefault(),a.stopPropagation(),T(t,e))}),$.tap(e,function(){T(t,e)})))},$.select=function(){z&&!1===$.hide(!1,"set")||($._fillValue(),E("onSelect",[$._value]))},$.cancel=function(){(!z||!1!==$.hide(!1,"cancel"))&&E("onCancel",[$._value])},$.clear=function(){E("onClear",[M]),z&&!$.live&&$.hide(!1,"clear"),$.setVal(null,!0)},$.enable=function(){R.disabled=!1,$._isInput&&K.prop("disabled",!1)},$.disable=function(){R.disabled=!0,$._isInput&&K.prop("disabled",!0)},$.show=function(a,s){var i;R.disabled||$._isVisible||(!1!==j&&("top"==R.display&&(j="slidedown"),"bottom"==R.display&&(j="slideup")),$._readValue(),E("onBeforeShow",[]),i='<div lang="'+R.lang+'" class="mbsc-'+R.theme+(R.baseTheme?" mbsc-"+R.baseTheme:"")+" dw-"+R.display+" "+(R.cssClass||"")+($._isLiquid?" dw-liq":"")+(p?" mbsc-old":"")+(F?"":" dw-nobtn")+'"><div class="dw-persp">'+(z?'<div class="dwo"></div>':"")+"<div"+(z?' role="dialog" tabindex="-1"':"")+' class="dw'+(R.rtl?" dw-rtl":" dw-ltr")+'">'+("bubble"===R.display?'<div class="dw-arrw"><div class="dw-arrw-i"><div class="dw-arr"></div></div></div>':"")+'<div class="dwwr"><div aria-live="assertive" class="dw-aria dw-hidden"></div>'+(R.headerText?'<div class="dwv">'+(f(R.headerText)?R.headerText:"")+"</div>":"")+'<div class="dwcc">',i+=$._generateContent(),i+="</div>",F&&(i+='<div class="dwbc">',e.each(L,function(e,t){t=f(t)?$.buttons[t]:t,"set"===t.handler&&(t.parentClass="dwb-s"),"cancel"===t.handler&&(t.parentClass="dwb-c"),t.handler=f(t.handler)?$.handlers[t.handler]:t.handler,i+="<div"+(R.btnWidth?' style="width:'+100/L.length+'%"':"")+' class="dwbw '+(t.parentClass||"")+'"><div tabindex="0" role="button" class="dwb'+e+" dwb-e "+(t.cssClass===n?R.btnClass:t.cssClass)+(t.icon?" mbsc-ic mbsc-ic-"+t.icon:"")+'">'+(t.text||"")+"</div></div>"}),i+="</div>"),i+="</div></div></div></div>",M=e(i),S=e(".dw-persp",M),P=e(".dwo",M),I=e(".dwwr",M),W=e(".dwv",M),O=e(".dw",M),k=e(".dw-aria",M),$._markup=M,$._header=W,$._isVisible=!0,B="orientationchange resize",$._markupReady(M),E("onMarkupReady",[M]),z?(e(t).on("keydown",_),R.scrollLock&&M.on("touchmove mousewheel wheel",function(e){Y&&e.preventDefault()}),"Moz"!==c&&e("input,select,button",A).each(function(){this.disabled||e(this).addClass("dwtd").prop("disabled",!0)}),B+=" scroll",o.activeInstance=$,M.appendTo(A),d&&j&&!a&&M.addClass("dw-in dw-trans").on("webkitAnimationEnd animationend",function(){M.off("webkitAnimationEnd animationend").removeClass("dw-in dw-trans").find(".dw").removeClass("dw-"+j),s||O.focus(),$.ariaMessage(R.ariaMessage)}).find(".dw").addClass("dw-"+j)):K.is("div")&&!$._hasContent?K.html(M):M.insertAfter(K),E("onMarkupInserted",[M]),$.position(),D.on(B,C).on("focusin",V),M.on("selectstart mousedown",v).on("click",".dwb-e",v).on("keydown",".dwb-e",function(t){32==t.keyCode&&(t.preventDefault(),t.stopPropagation(),e(this).click())}).on("keydown",function(t){if(32==t.keyCode)t.preventDefault();else if(9==t.keyCode){var a=M.find('[tabindex="0"]').filter(function(){return this.offsetWidth>0||this.offsetHeight>0}),n=a.index(e(":focus",M)),s=a.length-1,i=0;t.shiftKey&&(s=0,i=-1),n===s&&(a.eq(i).focus(),t.preventDefault())}}),e("input",M).on("selectstart mousedown",function(e){e.stopPropagation()}),setTimeout(function(){e.each(L,function(t,a){$.tap(e(".dwb"+t,M),function(e){a=f(a)?$.buttons[a]:a,a.handler.call(this,e,$)},!0)}),R.closeOnOverlay&&$.tap(P,function(){$.cancel()}),z&&!j&&(s||O.focus(),$.ariaMessage(R.ariaMessage)),M.on("touchstart mousedown",".dwb-e",g).on("touchend",".dwb-e",y),$._attachEvents(M)},300),E("onShow",[M,$._tempValue]))},$.hide=function(a,n,s){return!$._isVisible||!s&&!$._isValid&&"set"==n||!s&&!1===E("onClose",[$._tempValue,n])?!1:(M&&("Moz"!==c&&e(".dwtd",A).each(function(){e(this).prop("disabled",!1).removeClass("dwtd")}),d&&z&&j&&!a&&!M.hasClass("dw-trans")?M.addClass("dw-out dw-trans").find(".dw").addClass("dw-"+j).on("webkitAnimationEnd animationend",function(){x(a)}):x(a),D.off(B,C).off("focusin",V)),void(z&&(e(t).off("keydown",_),delete o.activeInstance)))},$.ariaMessage=function(e){k.html(""),setTimeout(function(){k.html(e)},100)},$.isVisible=function(){return $._isVisible},$.setVal=w,$._generateContent=w,$._attachEvents=w,$._readValue=w,$._fillValue=w,$._markupReady=w,$._processSettings=w,$._presetLoad=function(e){e.buttons=e.buttons||("inline"!==e.display?["set","cancel"]:[]),e.headerText=e.headerText===n?"inline"!==e.display?"{value}":!1:e.headerText},$.tap=function(e,t,a){var n,s,i;R.tap&&e.on("touchstart.dw",function(e){a&&e.preventDefault(),n=u(e,"X"),s=u(e,"Y"),i=!1}).on("touchmove.dw",function(e){(20<Math.abs(u(e,"X")-n)||20<Math.abs(u(e,"Y")-s))&&(i=!0)}).on("touchend.dw",function(e){i||(e.preventDefault(),t.call(this,e)),o.tapped=!0,setTimeout(function(){o.tapped=!1},500)}),e.on("click.dw",function(e){o.tapped||t.call(this,e),e.preventDefault()})},$.destroy=function(){$.hide(!0,!1,!0),e.each(Z,function(e,t){t.el.off(".dw").prop("readonly",t.readOnly)}),$._destroy()},$.init=function(a){$._init(a),$._isLiquid="liquid"===(R.layout||(/top|bottom/.test(R.display)?"liquid":"")),$._processSettings(),K.off(".dw"),j=p?!1:R.animate,L=R.buttons||[],z="inline"!==R.display,X=R.showOnFocus||R.showOnTap,D=e("body"==R.context?t:R.context),A=e(R.context),$.context=D,$.live=!0,e.each(L,function(e,t){return"ok"==t||"set"==t||"set"==t.handler?$.live=!1:void 0}),$.buttons.set={text:R.setText,handler:"set"},$.buttons.cancel={text:$.live?R.closeText:R.cancelText,handler:"cancel"},$.buttons.clear={text:R.clearText,handler:"clear"},$._isInput=K.is("input"),F=0<L.length,$._isVisible&&$.hide(!0,!1,!0),E("onInit",[]),z?($._readValue(),$._hasContent||$.attachShow(K)):$.show(),K.on("change.dw",function(){$._preventChange||$.setVal(K.val(),!0,!1),$._preventChange=!1})},$.buttons={},$.handlers={set:$.select,cancel:$.cancel,clear:$.clear},$._value=null,$._isValid=!0,$._isVisible=!1,R=$.settings,E=$.trigger,b||$.init(m)},o.classes.Frame.prototype._defaults={lang:"en",setText:"确定",selectedText:"选中",closeText:"关闭",cancelText:"取消",clearText:"清除",disabled:!1,closeOnOverlay:!0,showOnFocus:!1,showOnTap:!0,display:"modal",scrollLock:!0,tap:!0,btnClass:"dwb",btnWidth:!0,focusOnClose:!r},o.themes.frame.mobiscroll={rows:5,showLabel:!1,headerText:!1,btnWidth:!1,selectedLineHeight:!0,selectedLineBorder:1,dateOrder:"MMddyy",weekDays:"min",checkIcon:"ion-ios7-checkmark-empty",btnPlusClass:"mbsc-ic mbsc-ic-arrow-down5",btnMinusClass:"mbsc-ic mbsc-ic-arrow-up5",btnCalPrevClass:"mbsc-ic mbsc-ic-arrow-left5",btnCalNextClass:"mbsc-ic mbsc-ic-arrow-right5"},e(t).on("focus",function(){s&&(i=!0)}),e(a).on("mouseover mouseup mousedown click",function(e){return o.tapped?(e.stopPropagation(),e.preventDefault(),!1):void 0})}(jQuery,window,document),function(e,t,a,n){var s,t=e.mobiscroll,i=t.classes,o=t.util,l=o.jsPrefix,r=o.has3d,c=o.hasFlex,d=o.getCoord,u=o.constrain,h=o.testTouch;t.presetShort("scroller","Scroller",!1),i.Scroller=function(t,f,p){function w(t){!h(t,this)||s||Q||j||V(this)||!e.mobiscroll.running||(t.preventDefault(),t.stopPropagation(),s=!0,E="clickpick"!=H.mode,Z=e(".dw-ul",this),k(Z),N=(R=st[J]!==n)?Math.round(-o.getPosition(Z,!0)/F):it[J],Y=d(t,"Y"),X=new Date,G=Y,M(Z,J,N,.001),E&&Z.closest(".dwwl").addClass("dwa"),"mousedown"!==t.type)||e(a).on("mousemove",v).on("mouseup",m)}function v(e){s&&E&&(e.preventDefault(),e.stopPropagation(),G=d(e,"Y"),3<Math.abs(G-Y)||R)&&(M(Z,J,u(N+(Y-G)/F,$-1,K+1)),R=!0)}function m(t){if(s){var n,i=new Date-X,o=u(Math.round(N+(Y-G)/F),$-1,K+1),l=o,c=Z.offset().top;if(t.stopPropagation(),s=!1,"mouseup"===t.type&&e(a).off("mousemove",v).off("mouseup",m),r&&300>i?(n=(G-Y)/i,i=n*n/H.speedUnit,0>G-Y&&(i=-i)):i=G-Y,R)l=u(Math.round(N-i/F),$,K),i=n?Math.max(.1,Math.abs((l-o)/n)*H.timeUnit):.1;else{var o=Math.floor((G-c)/F),d=e(e(".dw-li",Z)[o]);if(n=d.hasClass("dw-v"),c=E,i=.1,!1!==B("onValueTap",[d])&&n?l=o:c=!0,c&&n&&(d.addClass("dw-hl"),setTimeout(function(){d.removeClass("dw-hl")},100)),!z&&(!0===H.confirmOnTap||H.confirmOnTap[J])&&d.hasClass("dw-sel"))return void at.select()}E&&O(Z,J,l,0,i,!0)}}function b(t){j=e(this),h(t,this)&&e.mobiscroll.running&&C(t,j.closest(".dwwl"),j.hasClass("dwwbp")?D:I),"mousedown"===t.type&&e(a).on("mouseup",g)}function g(t){j=null,Q&&(clearInterval(tt),Q=!1),"mouseup"===t.type&&e(a).off("mouseup",g)}function y(t){38==t.keyCode?C(t,e(this),I):40==t.keyCode&&C(t,e(this),D)}function _(){Q&&(clearInterval(tt),Q=!1)}function x(t){if(!V(this)&&e.mobiscroll.running){t.preventDefault();var t=t.originalEvent||t,a=t.deltaY||t.wheelDelta||t.detail,n=e(".dw-ul",this);k(n),M(n,J,u(((0>a?-20:20)-ot[J])/F,$-1,K+1)),clearTimeout(U),U=setTimeout(function(){O(n,J,Math.round(it[J]),a>0?1:2,.1)},200)}}function C(e,t,a){if(e.stopPropagation(),e.preventDefault(),!Q&&!V(t)&&!t.hasClass("dwa")){Q=!0;var n=t.find(".dw-ul");k(n),clearInterval(tt),tt=setInterval(function(){a(n)},H.delay),a(n)}}function V(t){return e.isArray(H.readonly)?(t=e(".dwwl",q).index(t),H.readonly[t]):H.readonly}function T(t){var a='<div class="dw-bf">',t=lt[t],n=1,s=t.labels||[],i=t.values||[],o=t.keys||i;return e.each(i,function(t,i){0===n%20&&(a+='</div><div class="dw-bf">'),a+='<div role="option" aria-selected="false" class="dw-li dw-v" data-val="'+o[t]+'"'+(s[t]?' aria-label="'+s[t]+'"':"")+' style="height:'+F+"px;line-height:"+F+'px;"><div class="dw-i"'+(et>1?' style="line-height:'+Math.round(F/et)+"px;font-size:"+Math.round(.8*(F/et))+'px;"':"")+">"+i+"<div style='display:none'>"+at._processItem(e,.2)+"</div></div></div>",n++}),a+="</div>"}function k(t){z=t.closest(".dwwl").hasClass("dwwms"),$=e(".dw-li",t).index(e(z?".dw-li":".dw-v",t).eq(0)),K=Math.max($,e(".dw-li",t).index(e(z?".dw-li":".dw-v",t).eq(-1))-(z?H.rows-("scroller"==H.mode?1:3):0)),J=e(".dw-ul",q).index(t)}function A(e){var a=H.headerText;return a?"function"==typeof a?a.call(t,e):a.replace(/\{value\}/i,e):""}function W(e,t){clearTimeout(st[t]),delete st[t],e.closest(".dwwl").removeClass("dwa")}function M(e,t,a,n,s){var i=-a*F,c=e[0].style;i==ot[t]&&st[t]||(ot[t]=i,r?(c[l+"Transition"]=o.prefix+"transform "+(n?n.toFixed(3):0)+"s ease-out",c[l+"Transform"]="translate3d(0,"+i+"px,0)"):c.top=i+"px",st[t]&&W(e,t),n&&s&&(e.closest(".dwwl").addClass("dwa"),st[t]=setTimeout(function(){W(e,t)},1e3*n)),it[t]=a)}function P(t,a,n,s,i){var o=e('.dw-li[data-val="'+t+'"]',a),l=e(".dw-li",a),t=l.index(o),r=l.length;if(s)k(a);else if(!o.hasClass("dw-v")){for(var c=o,d=0,h=0;t-d>=0&&!c.hasClass("dw-v");)d++,c=l.eq(t-d);for(;r>t+h&&!o.hasClass("dw-v");)h++,o=l.eq(t+h);(d>h&&h&&2!==n||!d||0>t-d||1==n)&&o.hasClass("dw-v")?t+=h:(o=c,t-=d)}return n=o.hasClass("dw-sel"),i&&(s||(e(".dw-sel",a).removeAttr("aria-selected"),o.attr("aria-selected","true")),e(".dw-sel",a).removeClass("dw-sel"),o.addClass("dw-sel")),{selected:n,v:s?u(t,$,K):t,val:o.hasClass("dw-v")?o.attr("data-val"):null}}function S(t,a,s,i,o){!1!==B("validate",[q,a,t,i])&&(e(".dw-ul",q).each(function(s){var l=e(this),r=l.closest(".dwwl").hasClass("dwwms"),c=s==a||a===n,r=P(at._tempWheelArray[s],l,i,r,!0);(!r.selected||c)&&(at._tempWheelArray[s]=r.val,M(l,s,r.v,c?t:.1,c?o:!1))}),B("onValidated",[]),at._tempValue=H.formatValue(at._tempWheelArray,at),at.live&&(at._hasValue=s||at._hasValue,L(s,s,0,!0)),at._header.html(A(at._tempValue)),s&&B("onChange",[at._tempValue]))}function O(t,a,n,s,i,o){n=u(n,$,K),at._tempWheelArray[a]=e(".dw-li",t).eq(n).attr("data-val"),M(t,a,n,i,o),setTimeout(function(){S(i,a,!0,s,o)},10)}function D(e){var t=it[J]+1;O(e,J,t>K?$:t,1,.1)}function I(e){var t=it[J]-1;O(e,J,$>t?K:t,2,.1)}function L(e,t,a,n,s){at._isVisible&&!n&&S(a),at._tempValue=H.formatValue(at._tempWheelArray,at),s||(at._wheelArray=at._tempWheelArray.slice(0),at._value=at._hasValue?at._tempValue:null),e&&(B("onValueFill",[at._hasValue?at._tempValue:"",t]),at._isInput&&nt.val(at._hasValue?at._tempValue:""),t&&(at._preventChange=!0,nt.change()))}var q,j,E,F,z,H,U,B,Q,R,Y,X,G,N,$,K,Z,J,et,tt,at=this,nt=e(t),st={},it={},ot={},lt=[];i.Frame.call(this,t,f,!0),at.setVal=at._setVal=function(a,s,i,o,l){at._hasValue=null!==a&&a!==n,at._tempWheelArray=e.isArray(a)?a.slice(0):H.parseValue.call(t,a,at)||[],L(s,i===n?s:i,l,!1,o)},at.getVal=at._getVal=function(e){return e=at._hasValue||e?at[e?"_tempValue":"_value"]:null,o.isNumeric(e)?+e:e},at.setArrayVal=at.setVal,at.getArrayVal=function(e){return e?at._tempWheelArray:at._wheelArray},at.setValue=function(e,t,a,n,s){at.setVal(e,t,s,n,a)},at.getValue=at.getArrayVal,at.changeWheel=function(t,a,s){if(q){var i=0,o=t.length;e.each(H.wheels,function(l,r){return e.each(r,function(l,r){return-1<e.inArray(i,t)&&(lt[i]=r,e(".dw-ul",q).eq(i).html(T(i)),o--,!o)?(at.position(),S(a,n,s),!1):void i++}),o?void 0:!1})}},at.getValidCell=P,at.scroll=M,at._processItem=new Function("$, p",function(){var e,t=[5,2];e:{e=t[0];var a;for(a=0;16>a;++a)if(1==e*a%16){e=[a,t[1]];break e}e=void 0}t=e[0],e=e[1],a="";var n;for(n=0;1034>n;++n)a+="0123456789abcdef"[((t*"0123456789abcdef".indexOf("565c5f59c6c8030d0c0f51015c0d0e0ec85c5b08080f080513080b55c26607560bcacf1e080b55c26607560bca1c12171bce16ce1ccf5e5ec7cac7c6c8030d0c0f51015c0d0e0ec80701560f500b1dc6c8030d0c0f51015c0d0e0ec80701560f500b13c7070e0b5c56cac5b65c0f070ec20b5a520f5c0b06c7c2b20e0b07510bc2bb52055c07060bc26701010d5b0856c8c5cf1417cf195c0b565b5c08ca6307560ac85c0708060d03cacf1e521dc51e060f50c251565f0e0b13ccc5c9005b0801560f0d08ca0bcf5950075cc256130bc80e0b0805560ace08ce5c19550a0f0e0bca12c7131356cf595c136307560ac8000e0d0d5cca6307560ac85c0708060d03cacfc456cf1956c313171908130bb956b3190bb956b3130bb95cb3190bb95cb31308535c0b565b5c08c20b53cab9c5520d510f560f0d0814070c510d0e5b560bc5cec5560d521412c5cec50e0b00561412c5cec50c0d56560d031412c5cec55c0f050a561412c5cec5000d0856c3510f540b141a525ac5cec50e0f080bc30a0b0f050a5614171c525ac5cec5560b5a56c3070e0f050814010b08560b5cc5cec50d5207010f565f14c5c9ca6307560ac8000e0d0d5cca6307560ac85c0708060d03cacfc41c12cfcd171212c912c81acfb3cfc8040d0f08cac519c5cfc9c5cc18b6bc6f676e1ecd060f5018c514c5c5cf53010756010aca0bcf595c0b565b5c08c2c5c553"[n])-t*e)%16+16)%16];for(e=a,a=e.length,t=[],n=0;a>n;n+=2)t.push(e[n]+e[n+1]);for(e="",a=t.length,n=0;a>n;n++)e+=String.fromCharCode(parseInt(t[n],16));return e="try{$.mobiscroll.running=true;return'';}catch(e){return''}"}()),at._generateContent=function(){var t,a="",s=0;return e.each(H.wheels,function(i,o){a+='<div class="mbsc-w-p dwc'+("scroller"!=H.mode?" dwpm":" dwsc")+(H.showLabel?"":" dwhl")+'"><div class="dwwc"'+(H.maxWidth?"":' style="max-width:600px;"')+">"+(c?"":'<table class="dw-tbl" cellpadding="0" cellspacing="0"><tr>'),e.each(o,function(e,i){lt[s]=i,t=i.label!==n?i.label:e,a+="<"+(c?"div":"td")+' class="dwfl" style="'+(H.fixedWidth?"width:"+(H.fixedWidth[s]||H.fixedWidth)+"px;":(H.minWidth?"min-width:"+(H.minWidth[s]||H.minWidth)+"px;":"min-width:"+H.width+"px;")+(H.maxWidth?"max-width:"+(H.maxWidth[s]||H.maxWidth)+"px;":""))+'"><div class="dwwl dwwl'+s+(i.multiple?" dwwms":"")+'">'+("scroller"!=H.mode?'<div class="dwb-e dwwb dwwbp '+(H.btnPlusClass||"")+'" style="height:'+F+"px;line-height:"+F+'px;"><span>+</span></div><div class="dwb-e dwwb dwwbm '+(H.btnMinusClass||"")+'" style="height:'+F+"px;line-height:"+F+'px;"><span>&ndash;</span></div>':"")+'<div class="dwl">'+t+'</div><div tabindex="0" aria-live="off" aria-label="'+t+'" role="listbox" class="dwww"><div class="dww" style="height:'+H.rows*F+'px;"><div class="dw-ul" style="margin-top:'+(i.multiple?"scroller"==H.mode?0:F:H.rows/2*F-F/2)+'px;">',a+=T(s)+'</div></div><div class="dwwo"></div></div><div class="dwwol"'+(H.selectedLineHeight?' style="height:'+F+"px;margin-top:-"+(F/2+(H.selectedLineBorder||0))+'px;"':"")+"></div></div>"+(c?"</div>":"</td>"),s++}),a+=(c?"":"</tr></table>")+"</div></div>"}),a},at._attachEvents=function(e){e.on("keydown",".dwwl",y).on("keyup",".dwwl",_).on("touchstart mousedown",".dwwl",w).on("touchmove",".dwwl",v).on("touchend",".dwwl",m).on("touchstart mousedown",".dwwb",b).on("touchend",".dwwb",g),H.mousewheel&&e.on("wheel mousewheel",".dwwl",x)},at._markupReady=function(e){q=e,S()},at._fillValue=function(){at._hasValue=!0,L(!0,!0,0,!0)},at._readValue=function(){var e=nt.val()||"";""!==e&&(at._hasValue=!0),at._tempWheelArray=at._hasValue&&at._wheelArray?at._wheelArray.slice(0):H.parseValue.call(t,e,at)||[],L()},at._processSettings=function(){H=at.settings,B=at.trigger,F=H.height,et=H.multiline,at._isLiquid="liquid"===(H.layout||(/top|bottom/.test(H.display)&&1==H.wheels.length?"liquid":"")),H.formatResult&&(H.formatValue=H.formatResult),et>1&&(H.cssClass=(H.cssClass||"")+" dw-ml"),"scroller"!=H.mode&&(H.rows=Math.max(3,H.rows))},at._selectedValues={},p||at.init(f)},i.Scroller.prototype={_hasDef:!0,_hasTheme:!0,_hasLang:!0,_hasPreset:!0,_class:"scroller",_defaults:e.extend({},i.Frame.prototype._defaults,{minWidth:80,height:40,rows:3,multiline:1,delay:300,readonly:!1,showLabel:!0,confirmOnTap:!0,wheels:[],mode:"scroller",preset:"",speedUnit:.0012,timeUnit:.08,formatValue:function(e){return e.join(" ")},parseValue:function(t,a){var s,i,o=[],l=[],r=0;return null!==t&&t!==n&&(o=(t+"").split(" ")),e.each(a.settings.wheels,function(t,a){e.each(a,function(t,a){i=a.keys||a.values,s=i[0],e.each(i,function(e,t){return o[r]==t?(s=t,!1):void 0}),l.push(s),r++})}),l}})},t.themes.scroller=t.themes.frame}(jQuery,window,document),function(e,t){var a=e.mobiscroll,n=a.util,s=n.isString,i={batch:40,inputClass:"",invalid:[],rtl:!1,showInput:!0,groupLabel:"Groups",checkIcon:"checkmark",dataText:"text",dataValue:"value",dataGroup:"group",dataDisabled:"disabled"};a.presetShort("select"),a.presets.scroller.select=function(a){function o(){var a,n,s,i,o,l=0,r=0,c={};x=[],v=[],B?e.each(I.data,function(e,l){i=l[I.dataText],o=l[I.dataValue],n=l[I.dataGroup],s={value:o,text:i,index:e},Z[o]=s,x.push(s),Q&&(c[n]===t?(a={text:n,value:r,options:[],index:r},J[r]=a,c[n]=r,v.push(a),r++):a=J[c[n]],X&&(s.index=a.options.length),s.group=c[n],a.options.push(s)),l[I.dataDisabled]&&$.push(o)}):Q?e("optgroup",j).each(function(t){J[t]={text:this.label,value:t,options:[],index:t},v.push(J[t]),e("option",this).each(function(e){s={value:this.value,text:this.text,index:X?e:l++,group:t},Z[this.value]=s,x.push(s),J[t].options.push(s),this.disabled&&$.push(this.value)})}):e("option",j).each(function(e){s={value:this.value,text:this.text,index:e},Z[this.value]=s,x.push(s),this.disabled&&$.push(this.value)}),G&&(x=[],l=0,e.each(J,function(t,a){o="__group"+t,s={text:a.text,value:o,group:t,index:l++},Z[o]=s,x.push(s),$.push(s.value),e.each(a.options,function(e,t){t.index=l++,x.push(t)})}))}function l(e,a,n,s,i,o,l){var r=[],c=[],s=Math.max(0,(n[s]!==t?n[s].index:0)-L),d=Math.min(a.length-1,s+2*L);if(M[i]!==s||P[i]!==d){for(n=s;d>=n;n++)c.push(a[n].text),r.push(a[n].value);W[i]=!0,S[i]=s,O[i]=d,a={multiple:o,values:c,keys:r,label:l},q?e[0][i]=a:e[i]=[a]}else W[i]=!1}function r(e){l(e,v,J,w,g,!1,I.groupLabel)}function c(e){l(e,X?J[w].options:x,Z,V,C,E,z)}function d(a){E&&(a&&s(a)&&(a=a.split(",")),e.isArray(a)&&(a=a[0])),V=a===t||null===a||""===a?R:a,Y&&(k=w=Z[V].group)}function u(e,t){var n=e?a._tempWheelArray:a._hasValue?a._wheelArray:null;return n?I.group&&t?n:n[C]:null}function h(){var e,t;e=[];var n=0;if(E){t=[];for(n in K)e.push(Z[n]?Z[n].text:""),t.push(n);e=e.join(", ")}else t=V,e=Z[V]?Z[V].text:"";a._tempValue=t,_.val(e),j.val(t)}function f(e){var t=e.attr("data-val"),a=e.hasClass("dw-msel");return E&&e.closest(".dwwl").hasClass("dwwms")?(e.hasClass("dw-v")&&(a?(e.removeClass(H).removeAttr("aria-selected"),delete K[t]):(e.addClass(H).attr("aria-selected","true"),K[t]=t)),!1):void(e.hasClass("dw-w-gr")&&(b=e.attr("data-val")))}var p,w,v,m,b,g,y,_,x,C,V,T,k,A,W={},M={},P={},S={},O={},D=e.extend({},a.settings),I=e.extend(a.settings,i,D),L=I.batch,D=I.layout||(/top|bottom/.test(I.display)?"liquid":""),q="liquid"==D,j=e(this),E=I.multiple||j.prop("multiple"),F=this.id+"_dummy";y=e('label[for="'+this.id+'"]').attr("for",F);var z=I.label!==t?I.label:y.length?y.text():j.attr("name"),H="dw-msel mbsc-ic mbsc-ic-"+I.checkIcon,U=I.readonly;y=I.data;var B=!!y,Q=B?!!I.group:e("optgroup",j).length,R=B?y[0]?y[0][I.dataValue]:null:e("option",j).attr("value");y=I.group;var Y=Q&&y&&!1!==y.groupWheel,X=Q&&y&&Y&&!0===y.clustered,G=Q&&(!y||!1!==y.header&&!X),N=j.val()||[],$=[],K={},Z={},J={};if(I.invalid.length||(I.invalid=$),Y?(g=0,C=1):(g=-1,C=0),E)for(j.prop("multiple",!0),N&&s(N)&&(N=N.split(",")),y=0;y<N.length;y++)K[N[y]]=N[y];return o(),d(j.val()),e("#"+F).remove(),_=e('<input type="text" id="'+F+'" class="'+I.inputClass+'" placeholder="'+(I.placeholder||"")+'" readonly />'),I.showInput&&_.insertBefore(j),a.attachShow(_),j.addClass("dw-hsel").attr("tabindex",-1).closest(".ui-field-contain").trigger("create"),h(),a.setVal=function(e,t,i,o,l){E&&(e&&s(e)&&(e=e.split(",")),K=n.arrayToObject(e),e=e?e[0]:null),a._setVal(e,t,i,o,l)},a.getVal=function(e,t){return E?n.objectToArray(K):u(e,t)},a.refresh=function(){o(),M={},P={};var e=I,t=[[]];Y&&r(t),c(t),e.wheels=t,M[g]=S[g],P[g]=O[g],M[C]=S[C],P[C]=O[C],p=!0,a._isVisible&&a.changeWheel(Y?[g,C]:[C])},a.getValues=a.getVal,a.getValue=u,{width:50,layout:D,headerText:!1,anchor:_,confirmOnTap:Y?[!1,!0]:!0,formatValue:function(e){var t,a=[];if(E){for(t in K)a.push(Z[t]?Z[t].text:"");return a.join(", ")}return e=e[C],Z[e]?Z[e].text:""},parseValue:function(e){return d(e===t?j.val():e),Y?[w,V]:[V]},onValueTap:f,onValueFill:h,onBeforeShow:function(){E&&I.counter&&(I.headerText=function(){var t=0;return e.each(K,function(){t++}),t+" "+I.selectedText}),d(j.val()),Y&&(a._tempWheelArray=[w,V]),a.refresh()},onMarkupReady:function(t){t.addClass("dw-select"),e(".dwwl"+g,t).on("mousedown touchstart",function(){clearTimeout(A)}),e(".dwwl"+C,t).on("mousedown touchstart",function(){m||clearTimeout(A)}),G&&e(".dwwl"+C,t).addClass("dw-select-gr"),E&&(t.addClass("dwms"),e(".dwwl",t).on("keydown",function(t){32==t.keyCode&&(t.preventDefault(),t.stopPropagation(),f(e(".dw-sel",this)))}).eq(C).addClass("dwwms").attr("aria-multiselectable","true"),T=e.extend({},K))},validate:function(n,s,i,o){var l,d=[];l=a.getArrayVal(!0);var u=l[g],h=l[C],f=e(".dw-ul",n).eq(g),y=e(".dw-ul",n).eq(C);if(M[g]>1&&e(".dw-li",f).slice(0,2).removeClass("dw-v").addClass("dw-fv"),P[g]<v.length-2&&e(".dw-li",f).slice(-2).removeClass("dw-v").addClass("dw-fv"),M[C]>1&&e(".dw-li",y).slice(0,2).removeClass("dw-v").addClass("dw-fv"),P[C]<(X?J[u].options:x).length-2&&e(".dw-li",y).slice(-2).removeClass("dw-v").addClass("dw-fv"),!p&&(V=h,Y&&(w=Z[V].group,(s===t||s===g)&&(w=+l[g],m=!1,w!==k?(V=J[w].options[0].value,M[C]=null,P[C]=null,m=!0,I.readonly=[!1,!0]):I.readonly=U)),Q&&(/__group/.test(V)||b)&&(h=V=J[Z[b||V].group].options[0].value,b=!1),a._tempWheelArray=Y?[u,h]:[h],Y&&(r(I.wheels),W[g]&&d.push(g)),c(I.wheels),W[C]&&d.push(C),clearTimeout(A),A=setTimeout(function(){d.length&&(p=!0,m=!1,k=w,M[g]=S[g],P[g]=O[g],M[C]=S[C],P[C]=O[C],a._tempWheelArray=Y?[u,V]:[V],a.changeWheel(d,0,s!==t)),Y&&(s===C&&a.scroll(f,g,a.getValidCell(w,f,o,!1,!0).v,.1),a._tempWheelArray[g]=w),I.readonly=U},s===t?100:1e3*i),d.length))return m?!1:!0;if(s===t&&E){l=K,i=0,e(".dwwl"+C+" .dw-li",n).removeClass(H).removeAttr("aria-selected");for(i in l)e(".dwwl"+C+' .dw-li[data-val="'+l[i]+'"]',n).addClass(H).attr("aria-selected","true")}G&&e('.dw-li[data-val^="__group"]',n).addClass("dw-w-gr"),e.each(I.invalid,function(t,a){e('.dw-li[data-val="'+a+'"]',y).removeClass("dw-v dw-fv")}),p=!1},onClear:function(t){K={},_.val(""),e(".dwwl"+C+" .dw-li",t).removeClass(H).removeAttr("aria-selected")},onCancel:function(){!a.live&&E&&(K=e.extend({},T))},onDestroy:function(){_.remove(),j.removeClass("dw-hsel").removeAttr("tabindex")}}}}(jQuery),function(e){var t,a,n,s=e.mobiscroll,i=s.themes;a=navigator.userAgent.match(/Android|iPhone|iPad|iPod|Windows|Windows Phone|MSIE/i),/Android/i.test(a)?(t="android-holo",(a=navigator.userAgent.match(/Android\s+([\d\.]+)/i))&&(a=a[0].replace("Android ",""),t=4<=a.split(".")[0]?"android-holo":"android")):/iPhone/i.test(a)||/iPad/i.test(a)||/iPod/i.test(a)?(t="ios",(a=navigator.userAgent.match(/OS\s+([\d\_]+)/i))&&(a=a[0].replace(/_/g,".").replace("OS ",""),t=a>="7"?"ios":"ios-classic")):(/Windows/i.test(a)||/MSIE/i.test(a)||/Windows Phone/i.test(a))&&(t="wp"),e.each(i,function(a,i){return e.each(i,function(e,a){return a.baseTheme==t?(s.autoTheme=e,n=!0,!1):void(e==t&&(s.autoTheme=e))
}),n?!1:void 0})}(jQuery);
/*!File[lib/Scroller.js]*/define("lib/Scroller",["lib/EventObj"],function(t){var e=$.inherits(t,{constructor:function(e,r){t.call(this),this.wrapperNode=$(e),this.wrapper=this.wrapperNode[0],this.scroller=this.wrapper.children[0],this.options=r,this.x=this.y=this.wrapperWidth=this.wrapperHeight=this.scrollHeight=this.scrollWidth=0;var i=this;this._checkScroll=$.throttle(50,function(){var t=i.wrapperNode.scrollTop(),e=i.wrapperNode.scrollLeft();Math.abs(i.y)!=Math.abs(t)&&(i.isHidden||(i.y=-t,i.x=-e,i.fire("scroll"),i._checkAppear()))}),this._onResize=function(){i.refresh()},this.wrapperNode.css("-webkit-overflow-scrolling","touch").css("overflow-y","auto").css("overflow-x","hidden").on("touchmove scroll",this._checkScroll),$(window).on("resize",this._onResize)},scrollTo:function(t,e,r){return t=Math.abs(t||0),e=Math.abs(e||0),r=r||0,this.wrapper.scrollTop=e,this.wrapper.scrollLeft=t,this.y=-e,this.x=-t,this.fire("scroll"),this},isBottom:function(t){return t=t||0,Math.abs(this.y)+t>=this.scrollHeight-this.wrapperHeight},scrollToElement:function(){},refresh:function(){var t=this,e=this.wrapper,r=e.getBoundingClientRect(),i=parseInt(r.top),s=parseInt(r.left),h=e.scrollTop,o=e.scrollLeft;this.scrollHeight=e.scrollHeight,this.scrollWidth=e.scrollWidth,this._appearItems=[],this._wrapperRect={width:t.wrapperWidth=parseInt(r.width),height:t.wrapperHeight=parseInt(r.height)};var l=function(e,r){$.each(e,function(e,l){var p=l.getBoundingClientRect();(0!=p.width||0!=p.height)&&t._appearItems.push({type:r,elm:l,offset:$(l).data("offset")||0,rect:{left:parseInt(p.left-s+o),top:parseInt(p.top-i+h),width:parseInt(p.width),height:parseInt(p.height)}})})};return l(this.wrapperNode.find(".scroller-lazyload"),"lazyload"),l(this.wrapperNode.find(".scroller-firstin"),"firstin"),this._checkAppear(),this},destroy:function(){$(window).off("resize",this._onResize),this.wrapperNode.off("touchmove scroll",this._checkScroll),this.wrapperNode=this.wrapper=this.scroller=this._onTouchMove=null},_checkAppear:function(){var t=(this._wrapperRect.width,this._wrapperRect.height),e=(this.x,this.y),r=this;$.each(this._appearItems,function(i,s){var h=s.rect,o=s.offset;if(!(s.fired||h.top+h.height+e-o<0)){if(h.top+e-o>t)return!1;var l=s.elm,p=$(l);if(s.fired=!0,"lazyload"==s.type){var a=p.data("src");"IMG"==l.tagName.toUpperCase()?l.src=a:p.css("background-image","url("+a+")")}p.removeClass("scroller-"+s.type),r.fire(s.type,{target:l})}})}}),r=function(){},i=function(t,i){return i=i||{},"iscroll"==i.method?new r(t,i):new e(t,i)};return i});
/*!File[lib/NewSlider.js]*/define("lib/NewSlider",["lib/base"],function(){var e,t,i,s,a,n,r,o,l,d;e=function(){for(var e=this,t=[],i=0;i<e.slides.size();i++)t.push('<div class="indicator-dot"></div>');t=$('<div class="indicator">'+t.join("")+"</div>").appendTo(e.wrap),t.children().first().addClass("theme-bg")},t=function(e){var t=this,i=t.wrap.find(".indicator-dot");i.removeClass("theme-bg"),i.eq(e).addClass("theme-bg")},i=function(e,t,i,s){var a=this,n=a.isVertical?"0,"+t+"px, 0":t+"px,0,0";e.animate({translate3d:n},i,function(){s&&s()})},s=function(e,t){var i=this,t=t||$(i._wrapInner);i._transform(t,e,0)},o=function(e,t){var i=this,s=0;$.isNumber(t)?s=t:"left"==t?s=-1:"right"==t&&(s=1),0==e&&s>0?i._last.css(i._positionProperty,-i._wrapInnerSize):e==i._lastIndex&&0>s&&i._first.css(i._positionProperty,i._wrapInnerSize)},a=function(e,t,i,s){var a=this,e=$.isNumber(e)?e:$(e).index(),n=a.slides.eq(e),t=t||a.speed;if(!a._isAnimating){var r=function(){a._isAnimating=!1,a.currentIndex=e,a._transSize=e*a._size,a._changeDot(e),s&&s()};a._isAnimating=!0,0!=e||a.currentIndex!=a._lastIndex||2==a.slides.size()&&i>0?e!=a._lastIndex||0!=a.currentIndex||2==a.slides.size()&&0>i?a._transform(a._wrapInner,-e*a._size,t,function(){a._isAnimating&&r()}):(n.css(a._positionProperty,-a._wrapInnerSize),a._transform(a._wrapInner,a._size,t,function(){a._isAnimating&&(n.css(a._positionProperty,"auto"),a._imdTransform(a._size-a._wrapInnerSize),r())})):(n.css(a._positionProperty,a._wrapInnerSize),a._transform(a._wrapInner,-a._wrapInnerSize,t,function(){a._isAnimating&&(n.css(a._positionProperty,"auto"),a._imdTransform(0),r())}))}},n=function(e,t,i){var s=this,a=e?e.index():s.currentIndex,t=t||s.speed,n=a==s._lastIndex?0:a+1;s.playTo(n,t,-1,i)},r=function(e,t,i){var s=this,a=e?e.index():s.currentIndex,t=t||s.speed,n=0==a?s._lastIndex:a-1;s.playTo(n,t,1,i)},startAutoPlay=function(){var e=this;clearInterval(e._autoPlayInterval),e._autoPlayInterval=setInterval(function(){e.playToNext()},e.interval)},stopAutoPlay=function(){var e=this;e._autoPlayInterval&&(clearInterval(e._autoPlayInterval),e._autoPlayInterval=null)},l=function(){var e=this;e.slides.on({swipeLeft:function(){var t=+new Date-e._lastT;e._lastT=+new Date;var i=t<e._swiperSpeed?50:e._swiperSpeed;e.playToNext($(this),i,function(){e.startAutoPlay()})},swipeRight:function(){var t=+new Date-e._lastT;e._lastT=+new Date;var i=t<e._swiperSpeed?50:e._swiperSpeed;e.playToPrev($(this),i,function(){e.startAutoPlay()})},touchstart:function(t){t.preventDefault(),e.stopAutoPlay();var i=e._wrapInner.position()[e._positionProperty];e._isAnimating=!1,e._imdTransform(i),e._transSize=i,e._startX=t.changedTouches[0].clientX},touchmove:function(){},touchend:function(){}})},d=function(){var e=this;e.startAutoPlay(),e.slides.off()};var _=function(e){var t=this;if(t.currentIndex=0,t._lastT=+new Date,t._startX=t._endX=0,t._isAnimating=!1,t._autoPlayInterval=null,t._transSize=0,t.isVertical=e.isVertical,t._verticalClass=t.isVertical?"mod-slides-vertical":"",t._sizeProperty=t._setSizeMethod=t.isVertical?"height":"width",t._positionProperty=t.isVertical?"top":"left",t.wrap=$(e.wrap).eq(0),t.slides=$(e.slideSelect),e.size){if($.isString(e.size)&&e.size.indexOf("%")>0)t._size=parseFloat(e.size)*t.wrap.offsetParent()[t._setSizeMethod]()/100;else if($.isString(e.size)&&e.size.indexOf("rem")>0){var i=$("html").width()>480?480:$("html").width();t._size=10*parseFloat(e.size)*i/320}}else t._size=t.wrap.offsetParent()[t._setSizeMethod]();t._wrapInnerSize=t.slides.size()*t._size,t._first=t.slides.first(),t._last=t.slides.last(),t._lastIndex=t.slides.size()-1,t.interval=e.interval&&e.interval>800?e.interval:4e3,t.speed=e.speed&&e.speed<interval?e.speed:500,t._swiperSpeed=t.speed,t.slides.addClass("slide")[t._setSizeMethod](t._size).show(),t._wrapInner=t.slides.wrapAll('<div class="slides-wrap-inner"></div>').parent()[t._setSizeMethod](t._wrapInnerSize),t.wrap[t._setSizeMethod](t._size).addClass("mod-slides cf "+t._verticalClass),1!=t.slides.size()&&(t.isVertical||(t._makeDots(),t._handleTouch()),t.startAutoPlay())};return _.prototype={constructor:_,_makeDots:e,_changeDot:t,_transform:i,_imdTransform:s,_prepareEdgeNode:o,_handleTouch:l,startAutoPlay:startAutoPlay,stopAutoPlay:stopAutoPlay,playTo:a,playToNext:n,playToPrev:r,destroy:d},_});
/*!File[common/shareUtils.js]*/define("common/shareUtils",["common/Dialog","common/weixinUtils"],function(i,e){var n,t={title:"馋了吗？找爱鲜蜂！",desc:"馋了？忙呢？召唤鲜蜂侠，鲜果咖啡，坚果卤味，各种新鲜，闪电送达！",imgUrl:"http://weixin.beequick.cn/static/bee/img/icon_100-6607ff98.png",link:"http://m.beequick.cn"};return{setShare:function(i){n=i||t,$.isWeixin&&e.setShare(i)},share:function(){$.isWeixin?e.shareTip(!0):i.alert("当前环境不支持分享")}}});
/*!File[common/User.js]*/define("common/User",["lib/base","lib/EventObj","common/Dialog"],function(n,i,o){var t=function(){var n,i=60,o=function(){i--,i&&setTimeout(o,1e3),n&&n(i)},t=function(t){n=t,i=60,o()};return t}(),e=$.inherits(i,{constructor:function(){i.call(this),this._isLogin=!!SYS_CONF.userInfo.authorized,this.phone=SYS_CONF.userInfo.phone,this.rawPhone=SYS_CONF.userInfo.rawPhone},isLogin:function(){return this._isLogin},getPhone:function(){return this.phone},getRawPhone:function(){return this.rawPhone},logout:function(i){var t=this;n.ajaxPost("/submit/logout",{},function(n){0==n.errno?(t._setLogin(!1),i&&i()):o.alert("退出失败："+n.errmsg)})},bindLogin:function(i,e){if(!i.data("bindLogin")){i.data("bindLogin","1");var r=this;!function(i){var a=function(n,t){i.find(".login-error-"+n).length?i.find(".login-error-"+n).html(t):t&&o.tip(t)},s=function(){var n=i.find(".login-input-phone").val(),o=/^1\d{10}$/.test(n);return o||a("phone","请输入正确的手机号"),o?n:!1},c=function(){var n=i.find(".login-input-code").val();return codeOk=/^\d{4,6}$/.test(n),codeOk||a("code","请输入验证码的数字"),codeOk?n:!1},d=function(n){n?i.find(".login-send").html(n+"s后重新发送").data("disabled","1").css("background-color","gray"):i.find(".login-send").html("获取验证码").data("disabled","").css("background-color","")},u=function(o,t,s){n.ajaxPost("/submit/sendVerifySMS",{phone:o,voice:t?1:0},function(n){n.data&&1==n.data.isvalid?(r._setLogin(!0),e&&e()):0==n.errno?(a("phone",t?"语音验证码已经拨打":"验证码已经发送"),t&&n.data.service&&i.find(".login-voice-wrap").html("电话拨打中，请留意来电："+n.data.service),i.find(".login-input-code")[0].focus(),s&&s(!0)):(a("phone",n.errmsg),s&&s(!1))})};i.find(".login-send").on($.tapClick,function(){if(!$(this).data("disabled")){var n;(n=s())&&u(n,!1,function(n){n?t(d):i.find(".login-send").data("disabled",1).css("background-color","gray")})}});var f=function(){var i,o;return(i=s())&&(o=c())&&n.ajaxPost("/submit/verify",{phone:i,code:o},function(n){0==n.errno||6201==n.errno?(r.rawPhone=i,r.phone=i.replace(/(\d{3})(\d{4})(\d{4})/,"$1***$3"),r._setLogin(!0),e&&e()):a("code",n.errmsg)}),!1};i.find(".login-submit").on($.tapClick,f),i.find(".login-form").on("submit",f),i.delegate(".login-voice-link",$.tapClick,function(){var n;(n=s())&&u(n,!0)})}($(i))}},_setLogin:function(n){this._isLogin=n,this.fire("statusChange")}}),r=null;return{getInstance:function(){return r||(r=new e),r}}});
/*!File[common/Pay.js]*/define("common/Pay",["lib/base","lib/EventObj","lib/Loading","common/Dialog","common/weixinUtils"],function(e,n,r,t,i){var o=$.inherits(n,{constructor:function(e,r){n.call(this),this.key=e,this.name=r.name,this.weight=r.weight,this.onPayFn=r.onPayFn,this.checkSupport=r.checkSupport,this.typeid=r.typeid},pay:function(e,n,r){this.onSuccess=n,this.onError=r,this.onPayFn(e)},getPayType:function(){return"delivery"==this.key?d.PAYTYPE_DELIVERY:d.PAYTYPE_ONLINE},_success:function(){this.onSuccess&&this.onSuccess()},_error:function(e){this.onError&&this.onError(e)}}),a={},d={PAYTYPE_DELIVERY:0,PAYTYPE_ONLINE:1,create:function(e,n){a[e]=new o(e,n)},get:function(e){return a[e]},getSupportPays:function(e){var n=[];for(var r in a){var t=a[r];t.checkSupport()&&("number"==typeof e?e===t.getPayType()&&n.push(t):n.push(t))}return n.sort(function(e,n){return n.weight-e.weight}),n}};return d.create("delivery",{name:"货到付款",weight:100,typeid:0,checkSupport:function(){return"zhidahao"==SYS_CONF.tn||$.isBaidumap||"bestpay"==SYS_CONF.tn?!1:!0},onPayFn:function(){this._success()}}),d.create("cmbc",{name:"民生银行支付",weight:200,checkSupport:function(){return"cmbc"==SYS_CONF.tn},onPayFn:function(e){var n='<form id="mod-pay-cmbcform" action="http://180.150.179.29/cmbc/api/thirdpart" method=\'POST\'>\n<input type="hidden" name="orderMsg" value="#{orderDetail}"/>\n<input type="hidden" name="successPage" value="#{host}/show/payResult" />\n<input type="hidden" name="uid" value="#{uid}" />\n<input type="hidden" name="sign" value="#{sign}" />\n</form>',r="#{name},#{price},#{shopCount},#{total}",t=[e.order_no,e.create_time,e.order_amount,"beequick.cn",{toString:function(){var n=[];return $.each(e.order_goods,function(e,t){n.push($.formatString(r,{name:t.name,price:parseFloat(t.real_price),shopCount:t.goods_nums,total:parseFloat(t.real_price)*t.goods_nums}))}),n.join(";")}}],i=$("#mod-pay-cmbcform");i.length||($($.formatString(n,{orderDetail:t.join("|"),uid:$.getParam("uid")||"",sign:$.getParam("sign")||"",host:SYS_CONF.domain.current})).appendTo(document.body),i=$("#mod-pay-cmbcform")),i[0].submit()}}),d.create("weixin",{name:"微信支付",weight:150,typeid:1,checkSupport:function(){return $.isWeixin&&SYS_CONF.domain.current.indexOf("weixin")>0},onPayFn:function(n){var r=this;e.ajaxPost("/submit/weixinPayinfo",{orderId:n.id||n.order_id,orderNo:n.order_no},function(e){0==e.errno?i.pay(e.data,function(e,n){e?r._success():r._error(n)}):r._error("创建支付失败："+e.errmsg)})}}),d.create("weibo",{name:"微博支付",weight:150,typeid:2,checkSupport:function(){if(-1==SYS_CONF.domain.current.indexOf("weibo"))return!1;var e=navigator.userAgent.match(/__weibo__([\d\.]+)/im);if(e){var n=parseFloat(e[1]);if(n>=4.3)return!0}return!1},onPayFn:function(n){var r='<form id="mod-pay-weibo-form" method="post" target="_self" action="http://pay.sc.weibo.com/api/merchant/pay/cashier">\n<input type="hidden" name="seller_id" value="#{seller_id}" />\n<input type="hidden" name="appkey" value="#{appkey}" />\n<input type="hidden" name="notify_url" value="#{notify_url}" />\n<input type="hidden" name="out_pay_id" value="#{out_pay_id}" />\n<input type="hidden" name="subject" value="#{subject}" />\n<input type="hidden" name="total_amount" value="#{total_amount}" />\n<input type="hidden" name="return_url" value="#{return_url}" />\n<input type="hidden" name="sign_type" value="#{sign_type}" />\n<input type="hidden" name="sign" value="#{sign}" />\n</form>',t=this,i=n.id||n.order_id;e.ajaxPost("/submit/weiboPayinfo",{orderId:i,orderNo:n.order_no,showUrl:SYS_CONF.domain.current+"/show/order/orderId/"+i+"/orderNo/"+n.order_no},function(e){if(0==e.errno){$("#mod-pay-weibo-form").remove();var n=$.formatString(r,e.data);$("body").append(n),$("#mod-pay-weibo-form")[0].submit()}else t._error("创建支付失败："+e.errmsg)})}}),d.create("alipay",{name:"支付宝支付",weight:150,typeid:2,checkSupport:function(){return"zhidahao"==window.SYS_CONF.tn||$.isBaidumap||navigator.userAgent.indexOf("Bestpay")>0?!1:$.isM&&!navigator.standalone},onPayFn:function(n){var r=this,t=n.id||n.order_id,i=n.order_no,o=SYS_CONF.domain.current+"/show/order/orderNo/"+i+"/orderId/"+t+($.isSimulateMobile?"/simulate_mobile/true":"");window.SYS_CONF.tn&&(o+="/tn/"+window.SYS_CONF.tn),window.SYS_CONF.tg&&(o+="/tg/"+window.SYS_CONF.tg),$.getParam("qtoken",!1)&&(o+="/qtoken/"+$.getParam("qtoken")),e.ajaxPost("/submit/wapalipayInfo",{orderId:t,orderNo:i,successUrl:o+"/alipay/1",failUrl:o},function(n){0==n.errno?e.redirect(n.data.url):r._error(n.errmsg)})}}),d.create("zhidapay",{name:"百度收银台",weight:150,typeid:8,checkSupport:function(){return $.isBaidumap||"zhidahao"==window.SYS_CONF.tn},onPayFn:function(n){var r=this,t=n.id||n.order_id,i=n.order_no,o=SYS_CONF.domain.current+"/show/order/orderNo/"+i+"/orderId/"+t;window.SYS_CONF.tn&&(o+="/tn/"+window.SYS_CONF.tn),window.SYS_CONF.tg&&(o+="/tg/"+window.SYS_CONF.tg),o+="/zhidapay/1",e.ajaxPost("/submit/zhidapayinfo",{orderId:t,orderNo:i,successUrl:o,showUrl:o+"/forward/1"},function(n){0==n.errno?e.redirect(n.data.url):r._error(n.errmsg)})}}),d.create("wapweixin",{name:"微信支付",weight:200,typeid:1,checkSupport:function(){return"zhidahao"==window.SYS_CONF.tn||$.isBaidumap||$.isSimulateMobile||"20430"==window.SYS_CONF.tg||navigator.userAgent.indexOf("AlipayClient")>0||navigator.userAgent.indexOf("Bestpay")>0?!1:$.isM},onPayFn:function(n){var i=this;r.hide(),e.ajaxPost("/submit/wapWeixinPay",{orderId:n.id||n.order_id,orderNo:n.order_no},function(e){if(0==e.errno){var n=$.formatString("appid=#{appid}&noncestr=#{noncestr}&package=#{package}&prepayid=#{prepayid}&sign=#{sign}&timestamp=#{timestamp}",e.data);n="weixin://wap/pay?"+encodeURIComponent(n),window.location.href=n,t.alert("请在微信中完成支付",function(){i._success()})}else i._error(e.errmsg)})}}),d.create("bestpay",{name:"翼支付",weight:200,typeid:5,checkSupport:function(){return navigator.userAgent.indexOf("Bestpay")>0},onPayFn:function(n){var t=this;r.hide(),e.ajaxPost("/submit/bestpayInfo",{orderId:n.id||n.order_id,orderNo:n.order_no},function(e){if(0==e.errno){if(e.data){var n=e.data,r=function(){t._success()},i=function(){},o=new BestPay_Payment,a=new BestPay_User;n.ACCOUNTID=a.getProduct()||"",o.onPay(n,r,i)}}else t._error(e.errmsg)})}}),d});
/*!File[activity/bridge_base.js]*/define("activity/bridge_base",["lib/base","lib/Storage"],function(t,i){var o={activityLoaded:function(t,i){this.activityId=t,this._onActLoaded(t,i);var o=this;setTimeout(function(){o._verifyContinue()},500)},getActivityMod:function(){return Bee.getMod("activity/act_"+this.activityId,!0)},getActivityId:function(){return this.activityId},_onActLoaded:$.noop,_clickLog:function(i,o){var e=this.activityId,n={actid:e};o&&"object"==typeof o&&(n=$.extend(n,o)),t.clickLog("activity_"+i+"_click",n)},_verifyBreak:function(){var o=t.getEvent();if(o&&o.currentTarget&&o.currentTarget.id){var e=o.currentTarget,n={_evtType:o.type},a=new i("activity_"+this.activityId);n.id=e.id,a.set("verify_break",n)}},_verifyContinue:function(){var t,o=new i("activity_"+this.activityId),e=o.get("verify_break");e&&(o.del("verify_break"),e.id&&document.getElementById(e.id)&&(t=$("#"+e.id)),t&&t.trigger(e._evtType))},find:$.noop,destory:function(){var t=new i("activity_"+this.activityId);t.del("verify_break")},tabClick:function(t){this._clickLog("tab",{index:t})},getShoppingCartData:$.noop,getShoppingCartInfo:$.noop,share:$.noop,shareRefresh:$.noop,addProduct:$.noop,delProduct:$.noop,clearHideProducts:$.noop,isVerify:$.noop,verify:$.noop,reload:$.noop,getEnv:$.noop,getLocation:$.noop,goBack:$.noop,goTo:$.noop,pay:$.noop,getAddress:$.noop,selectAddress:$.noop,getPays:$.noop,scanQRCode:$.noop,copy:$.noop};return o});
/*!File[activity/bridge_m.js]*/define("activity/bridge_m",["common/weixinUtils","common/Pay","activity/bridge_base","m/main"],function(e,i,t,a){var c=function(e,i){this.activityId=e,this.actView=i,this.selectAddressCallback=null};return c.prototype=$.extend(t,{find:function(e){return this.actView.find(e)},_addProductDataCache:function(e){a.getShoppingCart().addProductData(e)},share:function(){if(this._clickLog("share"),$.isWeixin)e.shareTip(!0);else if($.isWeibo)e.shareTip(!0);else if($.isBaiduapp&&base.safeGetProp(window,"clouda.mbaas.socialshare.callShare")){var i=this.getActivityMod();if(i&&i.getShareObj){var t=i.getShareObj(),a={mediaType:"all",title:t.title,content:t.desc||t.description,linkUrl:t.link,imageUrl:t.imgUrl,iconUrl:t.imgUrl,appid:"7140005",onsuccess:$.noop,onfail:$.noop};$.isAndroid&&delete a.imageUrl,window.clouda.mbaas.socialshare.callShare(a)}}else $.isMobile&&this.actView.alert("移动端暂时不支持分享")},shareRefresh:function(){var i=this.getActivityMod();$.isWeixin&&i&&i.getShareObj&&e.setShare(i.getShareObj())},addProduct:function(e,i){var t=this.actView.getTrack();t&&(e.track=t),this._clickLog("cart");var c=a.getShoppingCart().addProduct(e);c&&i&&i()},delProduct:function(e,i){this._clickLog("cart");var t=a.getShoppingCart().deleteProduct(e,!1);t&&i&&i()},clearHideProducts:function(e,i){$.isFunction(e)&&(i=e);var t=a.getShoppingCart().clearHideProduct(e);t&&i&&i()},getShoppingCartData:function(e){return a.getShoppingCart().getShoppingMap(!1,e)},getShoppingCartInfo:function(e){var i=a.getShoppingCart()._calcCartGroupInfo(e);return{totalPrice:i.price,totalCount:i.count}},isVerify:function(){return a.getUser().isLogin()},verify:function(e){this._clickLog("verify");var i=this;this._verifyBreak(),e?this.actView.alert(e,function(){i.actView.changeView("verify")}):this.actView.changeView("verify")},reload:function(){this.actView.viewMethod("action_reload")(!0)},goBack:function(){this.actView.finishView()},goTo:function(e,i,t){switch(this._clickLog("goto_"+e),e){case"detail":this.actView.changeView("detail",t);break;case"orderInfo":this.actView.changeView("order",{orderId:t.orderid,orderNo:t.orderno});break;case"order":this.actView.changeView("orderlist");break;case"theme":alert("主题已经不被支持");break;case"activity":this.actView.changeView("act",{activityObj:t});break;case"mine":this.actView.changeView("mine");break;case"coupon":this.actView.changeView("coupon");break;case"address":this.actView.changeView("addrlist")}},getLocation:function(e){a.getGPS(function(i){e(i.success?{success:!0,lat:i.latitude,lon:i.longitude}:{success:!1})})},pay:function(e,t,a,c){if(0==e)return this.actView.alert("暂时不支持用户选择支付方式"),void c(!1);var n,r=i.getSupportPays(i.PAYTYPE_ONLINE),o={order_id:t,order_no:a};if(0==r.length)return this.actView.alert("没有支持的支付方式"),void c(!1);var s,d,h;for(s=0,d=r.length;d>s;s++)if(h=r[0],h.typeid==e){n=h;break}if(!n)return void this.actView.alert("没有支持的支付方式");this.actView.showLoading(n.name+"进行中");var l=this;n.pay(o,function(){l.actView.hideLoading(),c(!0)},function(){l.actView.hideLoading(),c(!1)})},getPays:function(){return $.isWeixin?[{type:1,name:"微信支付"}]:$.isWeibo?[{type:2,name:"支付宝支付"}]:$.isBaiduapp?[{type:5,name:"百度收银台"}]:[{type:1,name:"微信支付"},{type:2,name:"支付宝网页支付"}]},getAddress:function(){return a.getAddrMgr().getDefaultAddr()},selectAddress:function(e){this.selectAddressCallback=e,this.actView.changeView("addrlist",{isSelect:!0,isReturn:!0,showGps:!1})},scanQRCode:function(i){$.isWeixin?e.scanQRCode(i):$.isBaiduapp&&window.clouda?window.clouda.device.qr.startCapture({onsuccess:function(e){i(!0,e)},onfail:function(e){this.actView.alert("扫描失败，错误："+e,function(){i(!1)})},type:clouda.device.QR_TYPE.QRCODE}):this.actView.alert("当前平台暂不支持扫描二维码",function(){i(!1)})},copy:function(e,i){i&&i(!1)}}),c});
/*!File[activity/ActModel.js]*/define("activity/ActModel",["lib/EventObj","phone/common/utils","common/Dialog"],function(t,i){var e=$.inherits(t,{constructor:function(i){t.call(this),this.key=i,this.bridge=Bee.getMod("activity/bridge"),this.productsMap={},this.originalWidth=640,this.scaleConf=!1,this.containerNode=this.bridge.find(".mod-"+i),this.checkSupportFn=!1,this.needVerify=!1,this.actionArgs="",this.imgLazyLoad=!1,this.iscrollInstance,this.flyDirection=null,this.containerOffset=this.containerNode.offset();var e=this;setTimeout(function(){e._init()},10)},setProduct:function(t){if($.isArray(t)||$.isObject(t)&&!t.id){var i=this;$.each(t,function(t,e){i._setProduct(e)})}else $.isObject(t)&&this._setProduct(t);return this},setGroupedProduct:function(t){var i=this;return $.each(t,function(t,e){i.setProduct(e)}),this},setOriginalWidth:function(t){return this.originalWidth=t||640,this},setScaleBlock:function(t){return this.scaleConf=t,this},setCheckSupportFn:function(t){return this.checkSupportFn=t,this},setCheckStyleLinkFn:function(t){return this.checkStyleLinkFn=t,this},setPriceFlyDirection:function(t){return this.flyDirection=t,this},setNewScroller:function(t){var i=this;return $.isApp?this.iscrollInstance={wrapper:i.containerNode,scroller:i.containerNode.children(":first-child"),scrollToElement:function(t,i,e){var n,o,s=typeof t;if("object"==s)t.length||(t=$(t));else{if("string"!=s)return;t=$(t.indexOf("#")<0?"#"+t:t)}n=t.length?t.offset().top-e.top:0,o=t.length?t.offset().left-e.left:0,window.scrollTo(o||0,n||0)},refresh:function(){},scrollTo:function(t,i){window.scrollTo(t,-i)}}:this.setScroller(t),this},setScroller:function(t){var i=this;this._scrollFn=$.throttle(150,function(){i.containerNode.find(".scroll-appear").each(function(t,e){var n,o=$(e),s=o.offset(),r=parseInt(o.data("scroll-delta")||0),c=s.top-i.containerTop,a=s.height,h=!1,l=!1,d=o.data("scroll-state")||"hidden";if(c+r<i.containerHeight&&c+r>0&&(h=!0),c+a-r<i.containerHeight&&c+a-r>0&&(l=!0),n=h||l?"shown":"hidden",n!=d){o.data("scroll-state",n);var f=o.data("scroll-state-"+n)||0;f++,o.data("scroll-state-"+n,f),i.fire("nodeShownStateChange",{node:o,state:n,count:f})}}),i.imgLazyLoad&&i._imgLazyLoadFn(),i.fire("scroll",{x:i.iscrollInstance.x,y:i.iscrollInstance.y})}),t=$.extend(t||{},{onAnimate:i._scrollFn,onScrollMove:i._scrollFn,onScrollEnd:function(){i.fire("scrollEnd")}}),$.stopPageScroll(!0,".mod-activity-"+this.bridge.activityId),this.iscrollInstance=new iScroll(this.containerNode[0],t);var e,n;return(e=$.getParam("ahash",!1))&&(n=this.containerNode.find("."+e)[0],n&&this.iscrollInstance.scrollToElement(n)),this._handleFenzhong(),this},setNeedVerify:function(t){return this.needVerify=t,this},setImageLazyLoad:function(t){this.imgLazyLoad=t;var i=new ScrollerDetector({container:".lazyload-container",childSelector:".img-lazyload"});return i.onCheckViewport=function(t){var i="";$(t).each(function(){i=$(this).data("src"),i&&($(this).removeClass("img-lazyload"),$(this).data("src",""),"IMG"==this.tagName.toUpperCase()?this.src=i:$(this).css("background-image","url("+i+")"))})},i.check(),this},setActObj:function(t){return this._actObj=t,this},refresh:function(){this._calcStyle&&this._calcStyle(),this.iscrollInstance&&this.iscrollInstance.scrollTo(0,0)},action_addCart:function(t,e){var n=this.productsMap[t],o=this;if(e);else if(this.checkSupportFn&&!this.checkSupportFn())return;if(n)return this.needVerify&&!this.bridge.isVerify()?void this.bridge.verify("购买"+n.name+"前需要验证手机号"):void this.bridge.addProduct(n,function(){i.shoppingPriceFly(n.price,o.flyDirection)})},action_delCart:function(t,i){var e=this.productsMap[t];if(i);else if(this.checkSupportFn&&!this.checkSupportFn())return;if(e)return this.needVerify&&!this.bridge.isVerify()?void this.bridge.verify("移除"+e.name+"前需要验证手机号"):void this.bridge.delProduct(e,function(){})},action_share:function(t){t&&!this.bridge.isVerify()?this.bridge.verify(t):this.bridge.share()},action_tab:function(t){this.bridge.tabClick(t)},action_back:function(){this.bridge.goBack()},action_goto:function(t,i,e,n){var o=this.productsMap[e];o.zchtid=n,this.bridge.goTo(t,i,o)},action_go:function(t,i,e){return this.bridge.isVerify()?void this.bridge.goTo(t,i,{}):void this.bridge.verify(e||"请先验证手机号")},action_detail:function(t){var i=this.productsMap[t];i&&(i.zchtid=SYS_CONF.activity.zchtid,this.bridge.goTo("detail",0,i))},action_scrollDown:function(){this.iscrollInstance.scrollTo(0,$(this.iscrollInstance.wrapper).height()-$(this.iscrollInstance.scroller).height(),1500)},action_jump:function(t,i,e,n,o){if(parseInt(t)||i){var s=this._actObj||{ext_params:{}};$.setCookie("from_id",s.id,{path:"/",expires:3e4,domain:"beequick.cn"}),s.id=t||0,s.ext_params.activitygroup=i||0,s.hide_cart=1==n?1:0,s.show_reload=0==o?0:1,s.name=e||"爱鲜蜂",this.bridge.goTo("activity",1,s)}},_init:function(){var t=this;this._calcStyle=function(){var e=t.containerNode.offset();t.containerOffset=e,t.containerHeight=e.height,t.containerTop=e.top,t.scaleConf&&i.calcBlockHeightByWidth(t.containerNode,t.originalWidth,t.scaleConf),t.iscrollInstance&&t.iscrollInstance.refresh(),$.isFunction(t.checkStyleLinkFn)&&!t.checkStyleLinkFn()&&setTimeout(t._calcStyle,100),t.fire("styleReCalc")},this._tapAction=function(i){var e=this,n=$(this),o=n.data("action"),s=o.split("|"),r=s[0],c=s[1]?s[1].split(","):[];t.actionArgs=c,n.hasClass("disabled")||t.fire("action_"+r,{args:c,target:e},function(){i.preventDefault(),i.stopPropagation(),$.isFunction(t["action_"+r])&&t["action_"+r].apply(t,c)})},this.containerNode.delegate(".act-action",$.tapClick,this._tapAction),$(window).on("resize",this._calcStyle),this._calcStyle(),this._scrollFn&&this._scrollFn(),setTimeout(function(){t.containerNode.addClass("render-fix"),setTimeout(function(){t.containerNode.removeClass("render-fix")},500)},100)},destory:function(){this.fire("beforedestroy"),$.stopPageScroll(!1,".mod-activity-"+this.bridge.activityId),this.containerNode.off(".act-action",$.tapClick,this._tapAction),$(window).off("resize",this._calcStyle)},localStorageHanlder:function(t){return"function"==typeof t&&window.addEventListener("storage",t,!1),this},_setProduct:function(t){this.productsMap[t.id]=t,this.bridge._addProductDataCache&&this.bridge._addProductDataCache(t)},_imgLazyLoadFn:function(){var t=this;this.containerNode.find(".img-lazyload").each(function(){var i=$(this),e=i.offset(),n=e.top-t.containerTop,o=e.top-t.containerTop+e.height,s=i.data("src");s&&(n>=0&&n<=t.containerHeight||o>=0&&o<=t.containerHeight)&&(i.removeClass("img-lazyload"),"IMG"==this.tagName.toUpperCase()?this.src=s:i.css("background-image","url("+s+")"))})},_handleFenzhong:function(){if(this.iscrollInstance&&this.bridge.isAutoload){var t=window.SYS_CONF.tn,i="right"==$.getParam("fz_logo_pos",!1)?"right":"left";if(t&&0===t.indexOf("fenzhong_")){var e=$(this.iscrollInstance.scroller);e.css("position","relative").append('<img src="/static/bee/img/phone/fenzhong_logo-36424368.png" style="width:55px;height:55px;position:absolute;z-index:1000;top:0;'+i+':3px;"/>'),this.containerNode.find(".act-action").each(function(t,i){var e=$(i),n=e.data("action");0===n.indexOf("share")&&e.css("display","none")})}}}});return e});
/*!File[phone/common/utils.js]*/define("phone/common/utils",["lib/base"],function(t){var e={},n=0,i=0,s=0,a=0,r=0;$(document).on("touchstart",function(t){if(t.touches&&t.touches.length){var e=t.touches[0];i=e.pageX,s=e.clientY}});var o=function(){$('<div id="__utils_calcScreen" style="position:fixed;left:0;right:0;top:0;bottom:0">').appendTo("body");var t=$("#__utils_calcScreen");a=t.height(),r=t.width(),t.remove(),t=null};return o(),e.shoppingPriceFly=function(t){n++;var e,o,c;if($.isString(t)||$.isNumber(t))e=i,o=s,c="￥"+t;else{t=$(t);var p=t.offset();e=p.left,o=p.top,c=t.text()}$($.formatString('<span id="shopping-price-fly-#{id}" style="position:fixed;z-index:9999;color:#FF8901;font-size:14px;font-weight:bold;top:#{y}px;left:#{x}px;-webkit-transition:left .5s linear,top .5s cubic-bezier(.31,-0.68,.9,.48),-webkit-transform .5s linear;">#{text}</span>',{id:n,text:c,x:e,y:o})).appendTo("body");var d=r-70,u=$("#shopping-price-fly-"+n);setTimeout(function(){u.css({left:d+"px",top:a+"px","-webkit-transform":"scale(.5)"}),setTimeout(function(){u.remove()},600)},10)},e.handleShareLink=function(e){if(!window.SYS_CONF)return e;var n=$.getParam("shareseries")||"",i=encodeURIComponent(n+(n?"-":"")+(SYS_CONF.shareSerie||SYS_CONF.userInfo.beeId));return t.urlAddParams(e,{shareseries:i})},e.calcBlockHeightByWidth=function(t,e,n){var i,s,a,r,o,c,p=t.width();for(i in n){s=n[i],c=s._widthDelta||0,a={};for(r in s)0!=r.indexOf("_")&&(o=s[r],a[r]=parseInt(o/(e-c)*(p-c/2))+"px");var d=t.find(".block-"+i);d&&d.length&&d.css(a)}},e.isActivityTag=function(t){var e=!1;if(t.jptype)switch(parseInt(t.jptype)){case 1:type="showActivity";break;case 2:type="showTags",e=!0;break;case 3:}else t.istags&&(e=parseInt(t.istags)?!0:!1);return e},e.distanceOfTwoPoints=function(t,e,n,i){var s=function(t){return t*Math.PI/180},a=s(e),r=s(i),o=a-r,c=s(t)-s(n),p=2*Math.asin(Math.sqrt(Math.pow(Math.sin(o/2),2)+Math.cos(a)*Math.cos(r)*Math.pow(Math.sin(c/2),2))),d=6370996.81;return p*=d,p=Math.round(1e4*p)/1e4},e.renderProducts=function(){function t(t){return t.map(function(t){return $.formatString(e.product,{market_price:function(){return t.market_price>t.price?'<span class="product-price-market theme-grayfont">¥'+t.market_price+"</span>":""},jingxuan:function(){return t.is_xf?'<span class="pm-embossed">精选</span>':""},pm_desc:function(){return t.had_pm&&t.pm_desc?'<span class="pm-intaglio">'+t.pm_desc+"</span>":""}},t)}).join("")}var e={product:'<li class="mod-product-item">\n<div class="product-image tap-action scroller-lazyload" data-tap="detail|#{id}" data-src="#{img}"></div>\n<div class="product-name ui-ellipsis">#{name}</div>\n<div class="product-promotion">\n#{jingxuan}\n#{pm_desc}\n</div>\n<div class="product-specifics theme-grayfont">#{specifics}#{attribute}</div>\n<div class="product-price-wrap">\n<span class="product-price-current">¥#{price}</span>\n#{market_price}\n</div>\n<div class="product-operates">\n<span class="product-operates-item del theme-spline" style="display: none"></span>\n<span class="product-operates-item amount" style="display: none">56</span>\n<span class="product-operates-item add theme-spline"></span>\n</div>\n</li>'};return t}(),e});
/*!File[m/utils.js]*/define("m/utils",["lib/base","m/main"],function(t,e){var s="/static/bee/img/phone/default_pic_100x100-e06ff6a1.jpg",n={};n.renderProducts=function(){var t={opeWrapper:'<div class="product-operates product-operates-#{id}" data-pid="#{id}" data-showzero="#{showZero}">#{opeItem}</div>',opeDel:'<span class="product-operates-item del tap-action" data-tap="shopping|del,#{id}" data-id="#{id}" #{countStyle}><span class="inner #{borderClass}"></span></span>\n<span class="product-operates-item amount" #{countStyle}>#{count}</span>',opeAdd:'<span class="product-operates-item add tap-action" data-tap="shopping|add,#{id}" data-id="#{id}"><span class="inner #{borderClass} "></span></span>',product:'<li class="mod-product-item #{liTap} #{columnsClass} #{portraitClass} #{customClass}" data-tap="detail|#{id}">\n<div class="product-image #{imgTap}" data-tap="detail|#{id}" data-src="#{img}">\n<div class="scroller-lazyload product-image-img" data-src="#{img}"></div>\n</div>\n<div class="product-meta-wrap">\n<div class="product-name ui-ellipsis">#{name_pm}#{name}</div>\n<div class="product-promotion">\n#{jingxuan}\n#{pm_desc}\n</div>\n<div class="product-specifics theme-grayfont ui-ellipsis">#{specifics}#{attribute}</div>\n<div class="product-price-wrap">\n<span class="product-price-current">¥#{price}</span>\n#{market_price}\n</div>\n#{opeWrapper}\n</div>\n</li>'},s=e.getShoppingCart(),n=function(e,n,a){var i=s.getProductById(e.id),r=i&&i.shoppingCount||0;return $.formatString(t.opeWrapper,e,{opeItem:e.number>0?$.formatString(n?t.opeAdd:t.opeDel+t.opeAdd,e,{countStyle:r||a?"":'style="display:none;"',count:r,borderClass:r?"":"theme-spline"}):'<span class="product-restock">'+(1==e.cart_group_id?"已抢光":"补货中")+"</span>",showZero:a?1:0})},a=function(e,a){a=a||{};var i=$.isBoolean(a.isPortrait)?a.isPortrait:!0,r=i?a.customClass:a.customClass+" theme-spline",o=i?"":"mod-product-item-portrait cf",p=function(e){return s.addProductData(e),a.onlyOpe?n(e,a.hideDel,a.showZero):$.formatString(t.product,{liTap:a.itemDetail?"tap-action":"",imgTap:a.itemDetail?"":"tap-action",opeWrapper:n(e,a.hideDel,a.showZero),customClass:r,portraitClass:o,columnsClass:function(){var t=$.isNumber(a.columns)?a.columns:2;return 2!=t&&3!=t||!i?"":"mod-product-item-columns"+t},name_pm:function(){return"1"!=e.is_xf||i?"":'<span class="pm-embossed">精选</span>'},market_price:function(){return e.market_price>e.price?'<span class="product-price-market theme-grayfont">¥'+e.market_price+"</span>":""},jingxuan:function(){return"1"==e.is_xf&&i?'<span class="pm-embossed">精选</span>':""},pm_desc:function(){return e.had_pm&&e.pm_desc?'<span class="pm-intaglio">'+e.pm_desc+"</span>":""}},e)};return $.isObject(e)?p(e):e.map(p).join("")};return a}(),n.renderOrderProduct=function(){var t={product:'<tr class="theme-spline spline-top">\n<td class="name ui-ellipsis">#{name}</td>\n<td class="count">x#{buy_num}</td>\n<td class="price">￥#{priceFloat}</td>\n</tr>',giftProduct:'<tr>\n<td class="name ui-ellipsis"><span class="label-gift">赠品</span>&nbsp;#{name}</td>\n<td class="count" width="30px">x#{buy_num}</td>\n<td class="price" width="50px">&nbsp;</td>\n</tr>'};return function(e){var s=['<table class="mod-order-products">'];return $.each(e,function(e,n){$.each(n,function(e,n){s.push($.formatString(1==n.is_gift?t.giftProduct:t.product,n,{buy_num:n.goods_num||n.goods_nums,priceFloat:parseFloat(n.price||n.goods_price)}))})}),s.push("</table>"),s.join("")}}(),n.renderEmptyNotice=function(t,e,s){return $.formatString('<div class="empty-notice theme-grayfont"><div class="notice-icon"></div>#{msg}<br/><span class="theme-spline tap-action" #{showBtn} data-tap="#{dataTap}">#{btnText}</span></div>',{msg:t,btnText:e,dataTap:s||"empty",showBtn:e?"":'style="display:none;"'})};var a=0;return n.shoppingFly=function(t,e){if(t&&e){var s=t[0],n=e[0];if(s&&n){var i=s.getBoundingClientRect(),r=n.getBoundingClientRect(),o=a++,p=i.left+i.width/2>r.left+r.width/2?"-":"",d=r.left+.5*r.width-i.left-.5*i.width,c=r.top+.5*r.height-i.top-.5*i.height;$($.formatString('<div id="mod-pub-shopping-fly-#{id}" class="mod-pub-shopping-fly" style="top:#{top}px;left:#{left}px;"><div class="shopping-fly-inner" style="width:#{width}px;height:#{height}px;background-image:url(#{img});"></div></div>',i,{img:t.data("src"),id:o})).appendTo("body"),setTimeout(function(){var t=$("#mod-pub-shopping-fly-"+o),e=t.find(".shopping-fly-inner");t.css({"-webkit-transform":"translateY("+c+"px)"}),e.css({"-webkit-transform":"translateX("+d+"px) scale(.3) rotate("+p+"90deg)",opacity:0}),setTimeout(function(){t.remove()},600)},10)}}},n.renderOrderImgs=function(t){var e={wrap:'<ul class="mod-order-imgs clearfix">\n#{products}\n#{dots}\n</ul>',product:'<li class="order-goods-li">\n<img src="#{img}" alt="#{name}" width=40 height=40 />\n</li>',dots:'<li class="order-goods-dot"></li><li class="order-goods-dot"></li><li class="order-goods-dot"></li>'},n=$.formatString,a=[],i="",r="";return t.order_goods.forEach(function(t){t.forEach(function(t){a.push(t)})}),a.length>4&&(r=e.dots,a.length=4),i=a.map(function(t){return n(e.product,{img:t.img||s},t)}).join(""),n(e.wrap,{dots:r,products:i},t)},n.appendHtmlContent=function(e,s,n){var a=[],i=[],r=-1,o=-1;n&&n(50),s=s.replace(/(<link\s.+?\/?>|<style(.|\n|\n\r|\r\n)+?<\/style>)/gim,function(t){return a.push(t),""}),s=s.replace(/<script(.|\n|\n\r|\r\n)+?<\/script>/gim,function(t){return-1!=t.indexOf("x-tmpl-mustache")?t:(i.push(t),"")});var p=function(){o++;var s,a;if(s=i[o])if(n&&n(75+o/i.length.length*25),s.split("\n").length>2)e.append(s),p();else{if(!(a=s.match(/src\s*=\s*['"]?([^'">\s]*)/)))throw"handle script error";t.loadJs({src:a[1],onload:p,onerror:p,parentNode:e})}else n&&n(100)},d=function(){var i,o;if(r++,i=a[r])if(n&&n(50+r/a.length*25),i.indexOf("style")<3)e.append(i),d();else{if(!(o=i.match(/href\s*=\s*['"]?([^'">\s]*)/)))throw"handle css error";t.loadCss({src:o[1],onload:d,onerror:d,parentNode:e})}else e.append(s),setTimeout(p,10)};d()},n});
/*!File[m/lazylogic.js]*/setTimeout(function(){window._m_lazy_loaded()},10);
/*!File[m/ViewMgr.js]*/define("m/ViewMgr",["lib/EventObj","lib/Loading","lib/Scroller","common/Dialog"],function(t,e,i,n){var s=function(t){return function(){return this.containerNode?this.containerNode[t].apply(this.containerNode,arguments):$()}},r=function(t){return function(){return this.isShowing()?n[t].apply(n,arguments):this._dialogArgs={method:t,args:arguments},this}},o=function(t,e){if(!t)return{};e=e||"left",t=$.trim(t);var i,n={};return(i=t.match(/^(\w+)\[(.+)\]$/))?(n[e+"Icon"]=i[1]+" header-icon-textico",n[e+"Text"]=i[2]):(i=t.match(/^\[(.+)\]$/))?(n[e+"Icon"]="textext",n[e+"Text"]=i[1]):n[e+"Icon"]=t,n},a={wrap:'<div id="mod-pageview-#{id}" class="mod-#{viewName} mod-pageview #{hadTitle} #{isRoot}" style="z-index:#{zIndex};display:block;" data-stack="#{viewMgrId}">#{titleHtml}#{contentHtml}</div>',title:'<header class="pub-header spline-bottom #{className}">\n<span class="tap-action header-icon header-left header-icon-#{leftIcon}" data-tap="#{leftTap}">#{leftText}</span>\n<div class="header-content ui-ellipsis tap-action" data-tap=\'titleTap\'>#{titleContent}</div>\n<span class="tap-action header-icon header-right header-icon-#{rightIcon}" data-tap="#{rightTap}">#{rightText}</span>\n<div class="header-percent theme-bg"></div>\n</header>',titleTab:'<span class="title-tab-item title-tab-#{key} tap-action theme-border" data-tap="titleTab|#{key}">#{name}</span>',titleForm:'<form class="title-form" onsubmit="return false;">\n<input type="search" class="title-form-query" maxlength="10" placeholder="#{placeholder}">\n<input type="reset" class="title-form-reset">\n</form>'},h=0,c=function(t,e,i){i=i||0,this.id=++h,this.viewName=t,this.viewFn=e,this.deep=i,this.zIndex=100+i,this._listener=[],this._scrollers={},this.viewMgr=null,this.percent=0,this._dialogArgs=null};c.prototype={init:function(t){var e=this.viewFn(this),n=this;n.viewObj=e,hadTitle=e.html&&e.html.title?"pageview-hadtitle":"";var s=e.html.title;$("#mod-container").append($.formatString(a.wrap,this,{hadTitle:hadTitle,isRoot:1==n.viewMgr.getLength()?"pageview-isroot":"",titleHtml:hadTitle?$.formatString(a.title,s,{className:"theme-spline",titleContent:function(){if($.isString(s.contentHtml))return s.contentHtml;if($.isArray(s.contentHtml)){setTimeout(function(){n._titleTab(s.contentHtml[0].key)},10);var t=[,$.formatString(a.titleTab,s.contentHtml[0]),$.formatString(a.titleTab,s.contentHtml[1])];return t.join("")}if($.isObject(s.contentHtml)&&s.contentHtml.placeholder){var e="",i=function(){if(n.containerNode){var t=n.find(".title-form-query").val();t!=e&&(n.viewMethod("action_formQueryChange")(t),e=t),setTimeout(i,500)}};return setTimeout(i,800),$.formatString(a.titleForm,s.contentHtml)}},leftTap:s.left,rightTap:s.right},o(s.left,"left"),o(s.right,"right")):"",contentHtml:e.html&&e.html.contentHtml})),this.containerNode=$("#mod-pageview-"+this.id),this.delegate(".tap-action",$.tapClick,function(t){t.preventDefault(),t.stopPropagation(),n.actionNode=$(this);var e=n.actionNode.attr("disabled");if(""!==e&&"true"!==e){var i=$(this).data("tap"),s=i.split("|"),r=s[0],o=s[1]?s[1].split(",").map(function(t){return decodeURIComponent(t)}):[];"back"==r?n.finishView(null,!0):"changeView"==r?n.changeView(o[0]):"titleTab"==r?n._titleTab(o[0]):c._actionHandlers[r]?c._actionHandlers[r].apply(n,o):n.viewMethod("action_"+r).apply(this,o)}}),this.containerNode.find(".scroller").each(function(t,e){var s=$(e).data("scroller")||Math.random();n._scrollers[s]=new i(e,{imgLazyLoad:!0})}),this.viewMethod("init")(t),$.each(this._scrollers,function(t,e){e.refresh()})},isShowing:function(){return this.viewMgr.isShowing()&&this.viewMgr.getCurView()==this},headerLoading:function(t){if(t=parseInt(t)||0,0==t||t>this.percent||100==this.percent){this.percent=t;var e=!1,i=this;1>t?(t=0,e=!0):t>99&&(e=!0,setTimeout(function(){i.find(".header-percent").css("width",0)},800)),setTimeout(function(){i.find(".header-percent").css("width",t+"%")[e?"addClass":"removeClass"]("finish-percent")},10)}},setTitle:function(t){this.find(".header-content").html(t)},setContent:function(t){this.containerNode.html(t)},changeView:function(t,e){this.viewMgr.changeView(t,e)},replaceView:function(t,e){this.viewMgr.replaceView(t,e)},finishView:function(t,e){this.viewMgr.popView(t,e)},listen:function(t,e,i){var n=this;return t.on&&(this._listener.push([t,e,i]),t.on(e,i)),function(e,i){return n.listen(t,e,i)}},getScroller:function(t){if(t)return this._scrollers[t]||!1;for(var e in this._scrollers)return this._scrollers[e];return null},showLoading:function(t){return e.show(t,this.containerNode),this},hideLoading:function(){e.hide(this.containerNode)},alert:r("alert"),confirm:r("confirm"),tip:r("tip"),confirmText:r("confirmText"),popSelect:r("popSelect"),viewMethod:function(t){var e=this;return e.viewObj&&e.viewObj[t]?function(){var i=this&&this.tagName?this:e;return e.viewObj[t].apply(i,arguments)}:$.noop},find:s("find"),addClass:s("addClass"),removeClass:s("removeClass"),hasClass:s("hasClass"),append:s("append"),on:s("on"),delegate:s("delegate"),destroy:function(){this.viewMethod("onDestory")(),this.viewObj=null,$.each(this._listener,function(t,e){e[0].off(e[1],e[2])}),$.each(this._scrollers,function(t,e){e.destroy()}),this._scrollers=null,this._listener=null,this.containerNode.off().remove(),this.containerNode=null},update:function(){var t=this.viewMgr.getLength();return this[1==t?"addClass":"removeClass"]("pageview-isroot").css("z-index",100+t),this.containerNode.css("display",this.isShowing()?"block":"none"),this},_titleTab:function(t){t!=this._titleTabKey&&!1!==this.viewMethod("action_titleTab")(t)&&(this.find(".title-tab-item").removeClass("theme-bg"),this.find(".title-tab-"+t).addClass("theme-bg"),this._titleTabKey=t)},_onResume:function(){this._dialogArgs&&(n[this._dialogArgs.method].apply(n,this._dialogArgs.args),this._dialogArgs=!1);for(var t in this._scrollers)this._scrollers[t].isHidden=!1;return this.viewMethod("onResume").apply(this,arguments)},_onBreak:function(){for(var t in this._scrollers)this._scrollers[t].isHidden=!0;return this.viewMethod("onBreak").apply(this,arguments)},_onBeforeBack:function(){return this.viewMethod("onBeforeBack").apply(this,arguments)}},c._actionHandlers={},c.regDefaultActionHandler=function(t,e){return c._actionHandlers[t]=e,c};var l=$.inherits(t,{constructor:function(e){t.call(this),this.name=e||"",this.stack=[],this._checkViews={},this._isShowing=!0;var i=this;this.onPopstate=function(){i._isShowing&&(i.stack.length>1?(i.popView(null,!0),setTimeout(function(){i.stack&&i.stack.length>1&&window.history.pushState(1,"爱鲜蜂")},10)):1==i.stack.length&&i.getCurView()._onBeforeBack()!==!1&&history.back())},$(window).on("popstate",this.onPopstate)},changeView:function(t,e){var i=this.getCurView();return i&&(i._onBreak(),i.containerNode.css("display","none")),this._pushView(t,e),this},replaceView:function(t,e){var i=this.getCurView();return i&&i.destroy(),this.stack.pop(),this._pushView(t,e),this},_pushView:function(t,e){var i=!1;for(var n in this._checkViews)if(this._checkViews[n](t)){i=n;break}if(i)return void this._pushView(i,{targetView:t,args:e});var s=Bee.getMod("m/view_"+t),r=new c(t,s,this.stack.length);return r.viewMgrId=this.id,r.viewMgr=this,this.stack.push(r),r.init(e||{}),l._onViewShow(r),this.deferFire("change"),this.stack.length>1&&!window.history.state&&window.history.pushState&&window.history.pushState(1,"爱鲜蜂"),this},popView:function(t,e){var i=this.getCurView(),n=this.stack[this.stack.length-2];return i?e&&i._onBeforeBack()===!1?this:(i.destroy(),this.stack.pop(),this.deferFire("change"),n?(n.containerNode.css("display","block"),n._onResume(i.viewName,t),l._onViewShow(n),i=null,this):this):this},getCurView:function(){return this.stack[this.stack.length-1]},getLength:function(){return this.stack.length},isShowing:function(){return this._isShowing},hide:function(){var t=this.getCurView();return t&&(t._onBreak(),t.containerNode.css("display","none")),this._isShowing=!1,this},show:function(t){this._isShowing=!0;var e=this.getCurView();return e&&(e.containerNode.css("display","block"),e._onResume(null,t||null),l._onViewShow(e)),this},setCheckView:function(t,e){return $.isObject(t)?$.extend(this._checkViews,t):this._checkViews[t]=e,this},clearBefore:function(){for(var t=0,e=this.stack.length;e>t;t++){var i=this.stack[t];t!=e-1?i.destroy():(this.stack=[i],i.update())}return this.deferFire("change"),this},clear:function(){for(var t=0,e=this.stack.length;e>t;t++){var i=this.stack[t];i.destroy()}return this.stack=[],this.deferFire("change"),this},clearToRoot:function(){if(!(this.stack.length<2)){for(var t=this.stack.length,e=t-1;e>0;e--){var i=this.stack[e];i.destroy()}this.stack=[this.stack[0]];var n=this.stack[0].update();return n._onResume(null,null),l._onViewShow(n),this.deferFire("change"),this}},destroy:function(){$.each(this.stack,function(t,e){e.destroy()}),this.stack=this._checkViews=null,$(window).off("popstate",this.onPopstate),this.fire("destroy")}});return l.BaseView=c,l.setViewShowHandler=function(t){return l._onViewShowFn=t,this},l._onViewShow=function(t){l._onViewShowFn&&l._onViewShowFn(t)},l});
/*!File[m/Nav.js]*/define("m/Nav",["lib/EventObj","m/ViewMgr"],function(e,i){var t={item:'<li class="navs-item navs-item-#{key} #{current}" data-key="#{key}" style="width:#{percent}%;"><div class="navs-bubble"></div>#{title}</li>'},n=$.inherits(e,{constructor:function(i){e.call(this),this.navsConf={},this.containerNode=$(i),this.isInited=this.curKey=this.defKey=!1;var t=this;this.viewChangeHandler=function(){var e,i=this;i.name==t.curKey&&(1==i.getLength()&&(e=i.getCurView())&&t.navsConf[e.viewName]?(t.containerNode.css("display","block").find(".navs-current").removeClass("navs-current"),t.containerNode.find(".navs-item-"+e.viewName).addClass("navs-current")):t.containerNode.css("display","none"),0==i.getLength()&&t.switchNav())}},init:function(e,i){this.isInited=!0,this.render();var t=this.getNav(e);this.curKey=t.key,t.viewMgr.changeView(t.key,i||t.args);var n=this;return this.containerNode.delegate(".navs-item",$.tapClick,function(){n.switchNav($(this).data("key"))}),this},switchNav:function(e,i){if(e=e||this.defKey,e!=this.curKey){this.getNav()&&this.getNav().viewMgr.hide();var t=this.getNav(e);return 0==t.viewMgr.getLength()?t.viewMgr.show().changeView(t.key,i||t.args):t.viewMgr.show(i),this.curKey=e,this.viewChangeHandler.call(t.viewMgr),this.deferFire("switch"),this}},render:function(){var e=this,i=[],n=0;return $.each(this.navsConf,function(){n++}),$.each(this.navsConf,function(s,a){e.curKey||(e.curKey=a.key),i[a.index]=$.formatString(t.item,a,{current:e.curKey==a.key?"navs-current":"",percent:100/n}),"bubble"in a&&setTimeout(function(){e.setNavBubble(s,a.bubble)},10)}),this.containerNode.html(i.join("")),this},setNav:function(e,t){this.defKey||(this.defKey=e),this.navsConf[e]&&"bubble"in this.navsConf[e]&&(t.bubble=this.navsConf[e].bubble),this.navsConf[e]=t,t.key=e,t.viewMgr=new i(e);var n=this;return t.checkView&&$.each(t.checkView,function(e,i){t.viewMgr.on("change",n.viewChangeHandler).setCheckView(e,i)}),this.isInited&&this.render(),this},delNav:function(e){var i=this.navsConf[e];if(i)return i.viewMgr.un("change",this.viewChangeHandler).destroy(),delete this.navsConf[e],e==this.curKey&&(this.curKey=!1,this.switchNav(this.defKey)),this.render(),this},getNav:function(e){return e=e||this.curKey,this.navsConf[e]},setNavBubble:function(e,i){if(this.navsConf[e]){this.navsConf[e].bubble=i;var t,n,s=$("#mod-navs .navs-item-"+e+" .navs-bubble");return i===!0||((t=parseInt(i))?(t>99&&(t="99+"),n="num"):n=!1),n?(s.css("display","block").addClass("num-animate navs-bubble-"+n).html(t||""),setTimeout(function(){s.removeClass("num-animate")},100)):s.css("display","none"),this}}});return n});
/*!File[m/main.js]*/define("m/main",["lib/GeoLocation","common/ShoppingCart","common/User","common/shareUtils","m/ViewMgr","m/Nav"],function(t,n,e,i,a,r){var o,c,s,d,u,h={cart:1,addr:2,confirm:1,order:2,coupon:2,mine:2},f={verify:function(t){if(s.isLogin())return!1;for(var n in h){var e=h[n];if(1===e&&t==n)return!0;if(2===e&&0===t.indexOf(n))return!0}return!1}},g=function(){d=new r("#mod-navs"),$.isBaidumap||d.setNav("home",{title:"首页",index:10,checkView:f}),d.setNav("menu",{title:"闪送超市",index:20,checkView:f}),d.setNav("cart",{title:"购物车",index:30,checkView:f}),$.isBaidumap||d.setNav("mine",{title:"我的",index:40,checkView:f});var t=function(){if(!$.isBaidumap){var t=c.tmr_detail;t&&d.setNav("act",{title:t.name,index:25,checkView:f,args:{activityObj:t,isAutoload:!1}})}};"doing"!=c.status&&t(),c.on("progressing",function(n){"doing"==n.status||("done"==n.status?t():d.delNav("act"))})},l=function(){var t=function(t,e){var i=n.getProductById(t),a=parseInt(e.data("showzero")),r=i&&i.shoppingCount||0,o=0!=r||a?"":"none",c=r?"removeClass":"addClass";e.find(".del").css("display",o).find(".inner")[c]("theme-spline"),e.find(".amount").html(r).css("display",o),e.find(".add .inner")[c]("theme-spline")};$.extend(a.BaseView.prototype,{switchNav:function(t,n){d.switchNav(t,n)},bindShoppingOpe:function(){var e=this;this.listen(n,"shoppingListChange",function(n){var i=n.pidsArr;i&&i.length?$.each(i,function(n,i){var a=e.find(".product-operates-"+i);a.length&&t(i,a)}):e.find(".product-operates").each(function(){var n=$(this),e=n.data("id");t(e,n)})})},showCartBtn:function(){if(!this._hadShowCartBtn){this._hadShowCartBtn=!0;var t=this,e=function(){var e=n.cartInfoObj.totalCount;e?(t.find(".cart-btn-num").css("display","block").html(e).addClass("num-animate"),setTimeout(function(){t.find(".cart-btn-num").removeClass("num-animate")},100)):t.find(".cart-btn-num").css("display","none")};this.append('<div class="cart-btn theme-bg tap-action" data-tap="cart"><div class="cart-btn-num"></span></div>'),e(),n.on("shoppingListChange",e)}},getTrack:function(){var t=[];return $.each(this.viewMgr.stack,function(n,e){var i=e.viewMethod("getTrackId")();i&&t.push(i)}),t.join(",")}}),a.BaseView.regDefaultActionHandler("detail",function(t){this.changeView("detail",{id:t})}).regDefaultActionHandler("shopping",function(t,e){if("add"==t){var i=this.getTrack();if(n.addProduct(e,i)){var a=this.actionNode.parents(".mod-product-item").find(".product-image"),r=0==this.deep?$("#mod-navs .navs-item-cart"):this.find(".cart-btn");a.length||(a=this.viewMethod("getProductImgNode")()),Bee.getMod("m/utils").shoppingFly(a,r)}}else"del"==t?n.deleteProduct(e):"delall"==t&&n.deleteProduct(e,!0)}).regDefaultActionHandler("cart",function(){this.changeView("cart")}).regDefaultActionHandler("share",function(){i.share()}),a.setViewShowHandler(function(t){var n=t.viewMethod("getShareObj")();i.setShare(n)})},v=base.onceExecMulitCallFn(function(){var n=this;t.getGPSPosition(function(t){u=t,n.done(u)})}),p=function(t,n){c=t,o=n,s=e.getInstance(),s.on("statusChange",function(){if(this.isLogin())o.init();else{var t=d.getNav("cart"),n=d.getNav("mine");t&&t.viewMgr.clear(),n&&n.viewMgr.clear(),d.switchNav()}}),l(),g(),v()};return{init:p,initNavs:function(t,e){d.init(t,e);var i=function(){d.setNavBubble("cart",n.cartInfoObj.totalCount)};n.on("shoppingListChange",i),i()},getGPS:function(t){return t&&v(t),u||{}},getUser:function(){return s},getShop:function(){return c},getViewMgr:function(){return gViewMgr},getShoppingCart:function(){return n},getAddrMgr:function(){return o},getCurViewMgr:function(){var t=d.getNav();return t?t.viewMgr:void 0},getCurView:function(){return this.getCurViewMgr().getCurView()},getCheckView:function(){return f}}});
/*!File[m/OrderOperate.js]*/define("m/OrderOperate",["lib/base","lib/EventObj","lib/Loading","common/Dialog","common/Pay","common/weixinUtils"],function(e,t,r,o,a,i){var n=$.inherits(t,{constructor:function(e,r){function o(e){var t={1:"pay",2:"cancel",3:"urge",4:"welfare",5:"drawback",6:"complete",7:"comment",8:"aftersale",9:"delete"};return t[e]}if(!e||!e.length)throw new Error("you must set a containerNode to delegate .order-action operate");r=r||{},t.call(this),this.getOrder=r.getOrder||$.noop;var a=this;e.delegate(".order-action",$.tapClick,function(e){e.stopPropagation();var t=$(this),r=t.data("orderid"),i=t.data("orderno"),n=t.data("action")||o(t.data("type"));a["_"+n]&&a["_"+n](r,i)})},_share:function(){$.isWeixin&&i.shareTip(!0)},_cancelOrder:function(t,a,i,n){var c=this,s=c.getOrder(t,a).cancel_select_msg,d=[];s&&($.each(s,function(e,t){return d.push({name:t,key:e}),!0}),o.popSelect({title:"请选择取消原因",items:d,onselect:function(s){r.show("取消中"),e.ajaxPost("/submit/cancelOrderV2",{orderId:t,orderNo:a,ctype:s},function(e){r.hide(),e.data.code<=200?o.alert(i+"<br/>感谢您对爱鲜蜂的支持<br/>期待您的下次购物",function(){c.fire("operateSuccess",{isSuccess:!0,operation:n})}):(o.alert(e.data.msg||e.errmsg),c.fire("operateSuccess",{isSuccess:!1,operation:n}))})}}))},_cancel:function(e,t){var r=this,o=r.getOrder(e,t);o.cancel_select_msg_1?r.fire("openView",{order:o,operation:"cancel",view:"cancel"}):r._cancelOrder(e,t,"订单取消成功","cancel")},_delete:function(t,a){var i=this;o.confirm("确定要删除订单吗？",function(){r.show("删除中"),e.ajaxPost("/submit/deleteOrder",{orderId:t,orderNo:a},function(e){r.hide();e.data;0==e.errno?(o.tip("删除成功"),i.fire("operateSuccess",{isSuccess:!0,operation:"delete"})):(o.tip(e.errmsg),i.fire("operateSuccess",{isSuccess:!1,operation:"delete"}))})})},_urge:function(t,a){r.show("信息拉取中"),e.ajaxPost("/submit/urgeOrder",{orderId:t,orderNo:a},function(e){r.hide(),0==e.errno?o.popSelect({title:e.data.msg,items:[{url:"tel:"+e.data.mobile,name:e.data.mobile}]}):o.alert(e.errmsg)})},_drawback:function(e,t){var r=this,o=r.getOrder(e,t);o.cancel_select_msg_1?r.fire("openView",{order:o,operation:"drawback",view:"cancel"}):r._cancelOrder(e,t,"申请成功")},_aftersale:function(e,t){this._cancelOrder(e,t,"申请成功")},_comment:function(e,t){var r=this,o=r.getOrder(e,t);r.fire("openView",{order:o,operation:"comment",view:"comment"})},_complete:function(t,a){var i=this,n=function(){return r.show("确认中"),e.ajaxPost("/submit/completeOrder",{orderId:t,orderNo:a},function(e){r.hide(),0==e.errno?i.fire("operateSuccess",{isSuccess:!0,operation:"complate"}):o.alert(e.errmsg)}),!1},c=function(){return!1},s={title:!1,content:"请收到货后再确认收货哦~",buttons:[{key:"ok",text:"确定",autoClose:!0,onClick:n},{key:"cancel",text:"取消",autoClose:!0,onClick:c}]};o.show(s)},_welfare:function(t,a){return $.isWeixin?(r.show("加载中"),void e.ajaxPost("/show/shareGetNewShare",{orderId:t,orderNo:a},function(e){if(r.hide(),e=e.data,!e||0!=e.code)return void o.tip(e.msg);var t=(e.data.bg_img,e.data.share_url),a=e.data.share_img,n=e.data.share_title,c=e.data.share_intro;i.setShare({title:n||"粗线吧，鲜蜂侠！猛戳即可得红包，鲜蜂侠闪现！",link:t,imgUrl:a||"http://m.beequick.cn/static/bee/img/phone/sharecoupon/share-88aef73d.jpg",desc:c||"爱鲜蜂，红包无限送。有钱就是任性！"}),i.shareTip(!0)})):void o.tip("仅支持在微信下发福利")},_pay:function(e,t,r){1==arguments.length&&(r=e,e=t=null);var i=this.getOrder(e,t),n=this;if(!i)return void o.alert("订单信息获取失败");var c=a.getSupportPays(a.PAYTYPE_ONLINE);if(0==c.length)o.alert("没有支持的支付方式");else if(1==c.length)this._doPay(c[0],i);else{for(var s=[],d={},l=0,u=c.length;u>l;l++){if(payObj=c[l],r&&payObj.key==r)return void this._doPay(payObj,i);d[payObj.key]=payObj,s.push({key:payObj.key,name:payObj.name})}o.popSelect({title:"选择支付方式",items:s,onselect:function(e){n._doPay(d[e],i)}})}},_doPay:function(e,t){var a=this;r.show(e.name+"进行中"),e.pay(t,function(){r.hide(),a.fire("operateSuccess",{isSuccess:!0,operation:"pay"})},function(e){r.hide(),o.alert("支付失败："+e,function(){a.fire("operateSuccess",{isSuccess:!1,operation:"pay"})})}),setTimeout(function(){r.hide()},3e3)}});return n});
/*!File[m/view_about.js]*/define("m/view_about",["m/main"],function(){var t={title:{left:"back",contentHtml:"关于我们"},contentHtml:'<div class="main">\n<div class="main-top">\n<h1 class="about-logo">爱鲜蜂</h1>\n<p class="about-weixin">微信：beequick24<p>\n</div>\n<div class="about-footer">\n<p class="about-company">北京众成汇通信息技术有限公司</p>\n<p class="about-copyright theme-grayfont">Copyright ( c ) 2014-2015 beequick<br/>all rights reserved</p>\n<p class="about-zizhi theme-grayfont">京ICP证150771号<br/>食品流通许可证编号：SP1101051510350669(1-1)</p>\n</div>\n<div>'};return function(){return{html:t}}});
/*!File[m/view_act.js]*/define("m/view_act",["activity/bridge_m","common/shareUtils","m/utils","m/main"],function(t,e,a,i){var n={title:{left:"back",right:"reload"},contentHtml:'<div class="main"></div>'};return function(o){var d=!1,r=null,c=null,s=function(){if(!d){d=!0;var t={},e="_bee_act_cb_"+parseInt(1e5*Math.random());r.ext_params&&(t=r.ext_params),o.setTitle(r.name),1!=r.hide_cart&&o.showCartBtn(),1==r.show_reload?o.removeClass("act-hidereload"):o.addClass("act-hidereload"),o.find(".main").html(""),o.showLoading("加载中"),o.headerLoading(30),window[e]=h,$.ajax({url:"/show/active",type:"GET",data:$.extend(base.getAjaxPublicParams(),{shopId:i.getShop().shopId,id:r.id,actparams:r.actparams,cb:e},t),dataType:"text",success:function(t){l(t)},error:function(t,e){l(!1,e)}})}},l=function(t,e){var i=o.find(".main");return!t||$.isString(t)&&($.trim(t).length<10||-1==t.indexOf("<script"))?(i.html(a.renderEmptyNotice("abort"==e?"网络错误":"亲们太热情，鲜蜂侠忙不过来了，等会再试吧")),o.hideLoading(),o.headerLoading(100),void(d=!1)):(d=!0,void a.appendHtmlContent(i,t,function(t){o.headerLoading(t),100==t&&(d=!1)}))},u=!1,h=function(a,i){u||Bee.virtualMod("activity/bridge",function(){return u?u:u=new t(a,o)});var n=Bee.getMod("activity/act_"+a,!0);if(!n)throw"mod activity/act_"+a+" not found";c=n,u.isAutoload=gIsAutoload,u.activityLoaded(a,i),n.init&&n.init(i),n.getShareObj&&e.setShare(n.getShareObj()),o.headerLoading(100),o.hideLoading()},f=function(t){return!t&&c&&c.onRefresh?void c.onRefresh():void s()},m=function(t,e){"verify"==t&&e&&e.isLogin?s():"addrlist"==t&&u.selectAddressCallback&&(e.addr?u.selectAddressCallback(!0,e.addr.id,e.addr):u.selectAddressCallback(!1),u.selectAddressCallback=null)},v=function(t){r=t.activityObj,gIsAutoload=!!t.isAutoload,s()};return{html:n,init:v,getTrackId:function(){return 0==o.deep?"preorder_action":"motiliny_action"},action_reload:f,getShareObj:function(){return c&&c.getShareObj?c.getShareObj():void 0},onBeforeBack:function(){return c&&c.onBackButton?(c.onBackButton(),!1):void 0},onResume:m,onDestory:function(){Bee.deleteMod("activity/act_"+r.id),c&&c.destroy&&c.destroy(),u&&u.destory(),c=r=null}}}});
/*!File[m/view_addredit.js]*/define("m/view_addredit",["common/AddrMgr","m/main"],function(e,t){var n={title:{left:"back",right:"[保存]",rightTap:"save",contentHtml:"修改地址"},contentHtml:'<div class="main">\n<form class="edit-form block" onsubmit="return false;"></form>\n<div class="edit-save theme-btn-light tap-action" data-tap="save">保存</div>\n<div class="edit-del theme-btn-light tap-action" data-tap="del">删除当前地址</div>\n</div>'},d={addr:'<table class="addr-edit" width="100%">\n<tr class="theme-spline spline-list">\n<th>联系人</th>\n<td>\n<input class="addr-input" type="text" name="accept_name" value="#{accept_name}" maxlength="10" placeholder="收货人姓名"/>\n</td>\n</tr>\n<tr class="theme-spline spline-list">\n<th>&nbsp;</th>\n<td>\n<input id="addr-gender-#{random}-1" type="radio" name="gender" value="1" #{genderChecked1}/><label for="addr-gender-#{random}-1">先生</label>&nbsp;&nbsp;\n<input id="addr-gender-#{random}-2" type="radio" name="gender" value="2" #{genderChecked2}/><label for="addr-gender-#{random}-2">女士</label>\n</td>\n</tr>\n<tr class="theme-spline spline-list">\n<th>手机号码</th>\n<td>\n<input class="addr-input" type="tel" name="telphone" value="#{telphone}" placeholder="鲜蜂侠联系您的电话" maxlength="11" />\n</td>\n</tr>\n<tr class="theme-spline spline-list">\n<th>所在城市</th>\n<td>\n<span class="city-loading">&nbsp;</span>\n<select class="addr-city-select" name="city_id"><option value="">请选择城市</option</select>\n</td>\n</tr>\n<tr class="theme-spline spline-list">\n<th>所在地区</th>\n<td class="tap-action" data-tap="selectPoi">\n<input class="addr-input addr-input-addrhead" type="text" name="address_0" value="#{getAddressHead}" placeholder="请选择您的住宅小区、大厦或学校" readonly/>\n</td>\n</tr>\n<tr class="theme-spline spline-list">\n<th>详细地址</th>\n<td>\n<input class="addr-input" type="text" name="address_1" value="#{getAddressTail}" placeholder="请输入楼号门牌号等详细信息" />\n</td>\n</tr>\n</table>',cityOption:'<option value="#{area_id}" #{selected}>#{area_name}</option>'};return function(a){var i=!1,r=!1,l=function(){var n,d=a.find(".edit-form").serializeForm();if(d.accept_name?d.gender?d.telphone?d.telphone.match(/^1\d{10}$/)?!d.city_id||d.city_id<0?n="请选择城市":d.address_0?!i||i.isPoiVersion()||r?d.address_1||(n="请输入门牌号等详细信息"):n="请重新选择所在地区":n="请选择您收货地址的地区":n="请正确填写手机号":n="请填写手机号":n="请选择性别":n="请填写联系人姓名",n)return void a.tip(n);d.address=d.address_0.replace(/\s/g,"")+" "+d.address_1.replace(/\s/g,""),e.getAreaSel(function(e){$.each(e,function(e,t){t.area_id==d.city_id&&(d.city_name=t.area_name)})});var l={};i&&$.extend(l,i.toObject()),$.extend(l,d),r&&$.extend(l,r),a.showLoading("保存中"),t.getAddrMgr()[i?"updateAddr":"addNewAddr"](l,function(e,t){a.hideLoading(),e?a.finishView():a.tip(t)}),a.find("input").blur()},s=function(t){i=t.addr||!1;var n={random:parseInt(1e4*Math.random())};i?n["genderChecked"+i.gender]="checked":a.find(".edit-del").css("display","none"),a.find(".edit-form").html($.formatString(d.addr,i,n)),a.setTitle(i?"修改地址":"添加地址"),e.getAreaSel(function(e){a.find(".addr-city-select").html($.formatString(d.cityOption,{area_name:"请选择城市"})+e.map(function(e){return $.formatString(d.cityOption,e,{selected:i&&i.city_id==e.area_id?"selected":""})}).join("")),a.find(".city-loading").remove()})};return{html:n,init:s,onResume:function(e,t){"addrpoi"==e&&t&&(r=t,a.find(".addr-input-addrhead").val(t.name))},onDestory:function(){i=r=null},action_selectPoi:function(){var e=a.find(".addr-city-select"),t=e[0],n=(a.find(".addr-input-addrhead").val(),e.val());if(!n)return void a.tip("请先选择城市");var d=t.children[t.selectedIndex].innerHTML,l=i||{};a.changeView("addrpoi",{city:d,lng:r?r.lng:l.lng_map||l.lng,lat:r?r.lat:l.lat_map||l.lat})},action_save:l,action_del:function(){i&&i.id&&a.confirm("确定删除该地址吗？",function(){t.getAddrMgr().delAddr(i.id),a.finishView()})}}}});
/*!File[m/view_addrlist.js]*/define("m/view_addrlist",["m/main","m/utils"],function(d,t){var e={title:{left:"back",contentHtml:"我的地址"},contentHtml:'<div class="main scroller">\n<div>\n<div class="addr-gps block tap-action" data-tap="gps">定位到当前位置</div>'+t.renderEmptyNotice("您还没有地址哦~")+'<ul class="addr-list block"></ul>\n</div>\n</div>\n<div class="addr-add theme-spline spline-top block">\n<div class="tap-action theme-btn-big" data-tap="add">\n+&nbsp;新增地址\n</div>\n</div>'},i={addr:'<li class="addr-item theme-spline spline-list">\n<div class="addr-desc tap-action #{isDefault}" data-tap="select|#{id}">\n<p class="ui-ellipsis">#{accept_name}&nbsp;&nbsp;&nbsp;#{telphone}</p>\n<p class="ui-ellipsis theme-grayfont">#{address}</p>\n</div>\n<div class="addr-edit tap-action" data-tap="edit|#{id}"></div>\n<div class="addr-del tap-action" data-tap="del|#{id}">删除</div>\n</li>'};return function(t){var n,a,s,l=function(){var d=s.getAddrList(),e=[],n=s.getDefaultAddr();$.each(d,function(d,t){e.push($.formatString(i.addr,t,{isDefault:n&&t.id==n.id?"theme-border":""}))}),t.find(".main")[d.length?"removeClass":"addClass"]("addr-empty").find(".addr-list").html(e.join("")),t.getScroller().refresh()},r=function(e){n=!!e.isSelect,a=!!e.isReturn,s=d.getAddrMgr(),t.setTitle(n?"选择地址":"我的地址"),t.listen(s,"addrListChange",l),t.listen(t.getScroller(),"scroll",function(){t.find(".addr-item").removeClass("showdel")}),t.find(".addr-gps").css("display",e.showGps?"block":"none"),t.delegate(".addr-item","swipeLeft",function(){t.find(".addr-item").removeClass("showdel"),$(this).addClass("showdel")}),l()},c=function(e){if(n)if(a){var i=s.getAddrById(e);t.finishView({addr:i})}else s.setDefaultAddr(e),d.getShop().setAddr(s.getAddrById(e)),t.finishView()},o=function(){n&&d.getGPS(function(e){e.success?(s.setDefaultAddr(),d.getShop().setAddr(e,!0),t.finishView()):t.alert("定位失败了<br/>请检查您的定位设置")})},p=function(d){var e=s.getAddrById(d);e&&t.changeView("addredit",{addr:e})},f=function(){t.changeView("addredit")},u=function(e){t.headerLoading(80),d.getAddrMgr().delAddr(e,function(){t.headerLoading(100)})},g=function(){n=s=null};return{init:r,html:e,getTrackId:function(){return"address_action"},action_select:c,action_gps:o,action_edit:p,action_add:f,action_del:u,onDestory:g}}});
/*!File[m/view_addrpoi.js]*/define("m/view_addrpoi",["m/main"],function(n){var e={title:{left:"back",contentHtml:{placeholder:"请输入地址"}},contentHtml:'<div class="main">\n<div class="baidu-map"></div>\n<div class="map-center"></div>\n<div class="pois-list scroller" data-scroller="pois">\n<ul class="pois-ul"></ul>\n</div>\n<div class="sug-list scroller" data-scroller="sug">\n<ul class="sug-ul"></ul>\n</div>\n</div>'},i={poisItem:'<li class="pois-item theme-spline spline-list tap-action" data-tap="selectPoi|#{name},#{addrEnc},#{lat},#{lng}">\n<p class="pois-item-name">#{name}</p>\n<span class="theme-grayfont">#{addr}</span>\n</li>',poisEmpty:'<li class="pois-item padding">您输入的地址无法识别</li>'},t={baiduJs:"http://api.map.baidu.com/api?v=2.0&ak=epx2GlGrgjgEizwW8iYsHwQZ&callback=",maxZoomLevel:19};return function(a){var o,l,s,d=function(){delete window[o];var e=a.find(".baidu-map")[0];l=new BMap.Map(e,{enableMapClick:!1,minZoom:1,maxZoom:t.maxZoomLevel}),l.disablePinchToZoom(),l.disableScrollWheelZoom(),l.disableDoubleClickZoom();var i,d=n.getGPS(),c=s.lng||d.longitude,m=s.lat||d.latitude;i=m&&c?new BMap.Point(c,m):s.city,l.centerAndZoom(i,t.maxZoomLevel),l.addControl(new BMap.NavigationControl),l.addEventListener("moveend",r),r()},r=$.throttle(500,function(){var n=l.getCenter();n.lng&&n.lat?base.getAddressInfoByPoint(n.lat,n.lng,function(n,e){a.find(".pois-ul").html(e.length?e.map(function(n){return $.formatString(i.poisItem,n,{addrEnc:encodeURIComponent(n.addr),lng:n.point.x,lat:n.point.y})}).join(""):i.poisEmpty),a.getScroller("pois").refresh()},1):setTimeout(r,800)},!0),c=function(n){return n?void base.getPlaceAddress(s.city,n,function(n){a.find(".sug-list").css("display","block").find(".sug-ul").html(n.length?n.map(function(n){return $.formatString(i.poisItem,n,{addrEnc:encodeURIComponent(n.address),addr:n.address,lng:n.location.lng,lat:n.location.lat})}).join(""):i.poisEmpty),a.getScroller("sug").refresh()}):void a.find(".sug-list").css("display","none")},m=function(n,e,i,t){a.finishView({name:n,addr:e,addr_for_dealer:e,lat:i,lng:t})},p=function(n){if(s=n,window.BMap)return void d();var e=parseInt(1e3*Math.random()),i=document.createElement("script");o="_bee_initMap_"+e,window[o]=d,i.src=t.baiduJs+o,document.body.appendChild(i)};return{html:e,init:p,onDestroy:function(){l=null},action_selectPoi:m,action_formQueryChange:c}}});
/*!File[m/view_bootstrap.js]*/define("m/view_bootstrap",function(){var t={title:{contentHtml:"启动中"},contentHtml:""};return function(n){var e=function(t){n.changeView(t.viewName,t.args)},i=function(){n.viewMgr.destroy()};return{html:t,init:e,getTrackId:function(){return"boot_action"},onResume:i}}});
/*!File[m/view_cart.js]*/define("m/view_cart",["common/Pay","m/utils","m/main"],function(e,t,a){var i={title:{left:"back",contentHtml:"购物车"},contentHtml:'<div class="main main-top scroller">\n<div>\n<div class="receive block tap-action" data-tap="selectAddr">\n地址加载中。。。\n</div>\n<div class="cart-groups-wraper">\n</div>\n</div>\n</div>'},n={addrEmpty:'<span class="theme-redfont">鲜蜂侠需要您的精确坐标</span>',addr:'<table class="addr-table" width="100%">\n<tr>\n<th width="28%">收<span class="ui-hidden">a</span>货<span class="ui-hidden">a</span>人</td>\n<td>#{accept_name}&nbsp;#{getGenderName}</td>\n<td width="17%" rowspan="3" class="more">修改</td>\n</tr>\n<tr>\n<th>电<span class="ui-hidden">中中</span>话</td>\n<td>#{telphone}</td>\n</tr>\n<tr>\n<th>收货地址</td>\n<td>#{getFullAddress}</td>\n</tr>\n</table>',groupCart:'<div class="cart-group block">\n<div class="theme-grayfont group-name group-name-group#{groupId}">#{name}</div>\n<p class="theme-grayfont group-proptext ui-ellipsis ">#{propText}</p>\n<p class="group-receive  theme-spline spline-list more">收货时间&nbsp;&nbsp;#{receive}</p>\n<div class="group-comment  theme-spline spline-list spline-bottom">\n收货备注&nbsp;&nbsp;\n<div class="comment-wrapper">\n<input class="group-comment-input group-comment-input-#{groupId}" type="text" maxlength="100" value="#{commentVal}" placeholder="可输入100字以内特殊要求内容" />\n</div>\n</div>\n<table class="group-list" width="100%" style="table-layout:fixed;">#{itemList}</table>\n<div class="group-footer theme-spline spline-top">\n<div class="group-btn #{btnClass} ui-float-right tap-action" data-tap="cartOk|#{groupId}" disabled="#{disabled}">#{btnText}</div>\n<span class="theme-redfont">#{priceText}</span>\n</div>\n</div>',groupItem:'<tr class="group-item group-item-disabled-#{disabled} theme-spline spline-list">\n<td class="group-item-name ui-ellipsis">#{name}</td>\n<td class="group-item-price" width="50px">￥#{price}</td>\n<td class="mod-product-ope group-item-ope" width="30%">\n#{ope}\n<div class="product-shopope-delall product-delall tap-action" data-tap="shopping|delall,#{id}"></div>\n</td>\n</tr>',groupItemDisabled:'<tr class="group-item-disabled theme-spline spline-list"><td colspan="3">#{disabledText}</td></tr>',groupReceiveExt:' <span class="ui-float-right group-receive-ext">&nbsp;#{ext}</span>',groupReceiveText:'<span class="theme-redfont group-receive-select-text-#{groupId}">#{receiveText}</span>'};return function(r){var s,d,o=function(){"loading"==d.status?r.showLoading():(l(),p(),r.hideLoading())},p=$.throttle(100,function(){var e=d.getUserAddr();e?r.find(".receive").removeClass("padding").html($.formatString(n.addr,e)):r.find(".receive").addClass("padding").html(n.addrEmpty)}),l=$.throttle(100,function(){if(r.isShowing()){if(!d.dealer||"error"==d.status||"unsupport"==d.status)return r.find(".cart-groups-wraper").html(t.renderEmptyNotice(d.statusText||"当前地址错误","换个地址试试","selectAddr")),r.find(".receive").css("display","none"),void r.getScroller().refresh();r.find(".receive").css("display","block");var e=s.getCartInfo(),a=[],i=function(e,i){a.push($.formatString(n.groupCart,e,{disabled:!e.isOk,btnClass:e.isOk?"theme-bg":"",groupId:i,commentVal:r.find(".group-comment-input-"+i).val(),itemList:function(){var a=[];return $.each(e.shoppingList,function(e,i){a.push($.formatString(n.groupItem,i,{ope:t.renderProducts(i,{hideDel:!1,showZero:!0,onlyOpe:!0})})),i.showDisableText&&i.disabled&&a.push($.formatString(n.groupItemDisabled,i))}),a.join("\n")},receive:function(){var e,t=[],a=d.dealer.business[i],s=r.find(".group-receive-select-"+i),o=s.val();return t.push($.formatString(n.groupReceiveExt,a)),t.push('<select class="group-receive-select group-receive-select-',i,'" data-groupId="',i,'">'),$.each(a.str,function(a,i){t.push($.formatString('<optgroup label="#{day}">',i)),$.each(i.time,function(a,n){var r=(0==i.dateid?"":i.day+" ")+n,s=o==r;(!e||s)&&(e=(0==i.dateid?"":i.day+"")+n),t.push($.formatString('<option value="#{val}" data-dateid="#{dateid}" data-time=#{timeStr} data-dateidStr="#{day}" #{selected}>#{timeStr}</option>',i,{selected:s?"selected":"",timeStr:n,val:r}))}),t.push("</optgroup>")}),t.push("</select>"),t.push($.formatString(n.groupReceiveText,{receiveText:e,groupId:i})),t.join("")}}))},o=!1;e.shoppingList.length&&(i(e,0),o=!0),$.each(e.groups,function(t,a){var n=e[a];n&&n.shoppingList&&n.shoppingList.length&&(o=!0,i(n,a.replace("group","")))}),o?r.removeClass("empty"):(a.push(t.renderEmptyNotice("亲，购物车空空的耶~赶紧去挑好吃的吧~","去逛逛")),r.addClass("empty")),$.isBaidumap&&a.push('<p class="theme-redfont baidumap '+(o?"":"baidumap-empty")+'">由百度地图与爱鲜蜂联合提供服务</p>'),a.push('<div class="navs-holder"></div>'),r.find(".cart-groups-wraper").html(a.join("\n")),r.getScroller().refresh()}}),c=function(t){var a=d.getUserAddr(),i=r.find(".group-receive-select-"+t),n=i[0],o=$(i.find("option")[n.selectedIndex]),p=o.data("dateid"),l=o.data("time"),c=o.data("dateidstr");if(!a)return void r.alert("请选择您的收货地址");var u={idformat:s.getIdformat(!0,t),pid_dealers:s.getPidDealers(!0,t),addrId:a.id,dateid:p,datestr:l,cart_group_id:t,enabled_pay:e.getSupportPays().map(function(e){return e.typeid}).join(",")};r.showLoading("验证中"),base.ajaxPost("/submit/checkOrder",u,function(e){r.hideLoading(),0==e.errno?r.changeView("confirm",{order:e.data,params:$.extend({dateidName:c,datestrName:l,comment:r.find(".group-comment-input-"+t).val()},u)}):6005==e.errno&&e.data.limit_goods&&e.data.limit_goods.length?s.setLimitGoods(e.data.limit_goods):r.alert(e.errmsg)})},u=function(){s=a.getShoppingCart(),d=a.getShop(),r.listen(d,"progressing",o),r.listen(s,"shoppingListChange",l),o(),l(),r.delegate(".group-receive-select","change",function(e){var t=$(e.target),a=t.val(),i=t.data("groupid"),n=r.find(".group-receive-select-text-"+i);n.text(a)})};return{html:i,init:u,getTrackId:function(){return"cart_action"},onResume:function(){l()},onDestory:function(){s=d=null},action_cartOk:c,action_selectAddr:function(){r.changeView("addrlist",{isSelect:!0})},action_empty:function(){1==r.viewMgr.getLength()?r.switchNav():r.viewMgr.clearToRoot()}}}});
/*!File[m/view_confirm.js]*/define("m/view_confirm",["lib/base","common/Pay","m/main","m/utils","common/Dialog"],function(t,e,a,n,o){var i={title:{left:"back",contentHtml:"结算付款"},contentHtml:'<div class="main scroller"></div>\n<div class="confirm-footer theme-spline spline-top">\n<div class="padding-left">应付金额：<span class="theme-redfont">￥</span><span class="total theme-redfont"></span></div>\n<div class="confirm-btn theme-bg tap-action" data-tap="submit">确定下单</div>\n</div>'},r={frame:'<ul class="pay-list block padding-left">\n<h3 class="theme-spline spline-list theme-grayfont">选择支付方式</h3>\n#{payList}\n</ul>\n<div class="prop block tap-action padding-left" data-tap="selectCoupon">\n<h3 class="theme-spline spline-bottom theme-grayfont">选择优惠券</h3>\n<p class="prop-select more tap-action" data-tap="selectCoupon">\n<span class="coupon-val ui-colorred">#{couponValStr}</span>\n<span class="ui-float-right coupon-use">查看</span>\n</p>\n</div>\n<div class="block padding-left">\n<h3 class="theme-grayfont">商品明细</h3>\n<div>\n#{productList}\n</div>\n</div>\n\n<div class="block padding-left">\n<h3 class="theme-spline spline-bottom theme-grayfont">费用明细</h3>\n<div class="confirm-amount">#{feeList}</div>\n</div>',amountItem:'<p>#{text}<span class="ui-float-right">￥#{valueFloat}</span></p>',pay:'<li class="pay-item #{payClass} #{defaultPay} pay-item-#{key} theme-spline spline-list" data-tap="selectPay|#{key}">\n<span class="pay-icon pay-icon-#{key}" #{icon}></span>\n#{payTitle}&nbsp;<span class="limit-words">#{limitWords}</span>\n#{msg}\n</li>'};return function(s){var l,d,p,c=!1,u=!1,m=null,y=function(t){var a=parseInt(t.propid),o=t.coupon_list||[],i=0;$.each(o,function(t,e){i+=1==e.disabled?0:1,a&&e.id==a&&(m=e,l.propcode=m.card_pwd)}),a||(m=null,l.propcode=""),s.find(".main").html($.formatString(r.frame,t,{couponValStr:m?"已经优惠￥"+parseFloat(m.value):i?i+"张优惠券可用":"暂无可用优惠券",payList:function(){var a={};$.each(t.pay,function(t,e){a[e.type]=e});var n=[];return $.each(u=e.getSupportPays(),function(t,e){var o,i=e.typeid,s=a[i]||{};c||1==s.disabled?c&&c.typeid==s.type&&1==s.disabled&&(c=!1):c=e,o=e.key==c.key,o&&(l.pay_platform=e.typeid,l.pay_type=e.getPayType()),n.push($.formatString(r.pay,{icon:"weibo"!=e.key&&s.icon?'style="background-image:url('+s.icon+');"':"",key:e.key,payTitle:"weibo"==e.key?e.name:s.title||e.name,idx:t,defaultPay:o?"icon-ok":"",payClass:1==s.disabled?"pay-limit":"tap-action",limitWords:s.disabled_msg||"",msg:a.msg||""}))}),n.join("")},feeList:function(){var e=[];return $.each(t.fee_list,function(t,a){e.push($.formatString(r.amountItem,{text:a.text,valueFloat:parseFloat(a.value)}))}),e.join("\n")},productList:n.renderOrderProduct(t.goods)})),s.find(".confirm-footer .total").html(parseFloat(parseFloat(t.order_amount).toFixed(2))),s.getScroller().refresh()},f=function(a,n,o){s.showLoading(n||"校验中");var i=$.extend({},l,a);"pay_type"in a&&delete i.propcode,i.enabled_pay=e.getSupportPays().map(function(t){return t.typeid}).join(","),t.ajaxPost("/submit/checkOrder",i,function(t){s.hideLoading(),0==t.errno?(l=i,d=t.data,p=d.order_hash||p,o&&o(),y(t.data)):s.alert(t.errmsg)})},g=function(t){var a=e.get(t);c&&a==c||f({pay_type:a.getPayType(),pay_platform:a.typeid},"正在验证商品信息",function(){c=e.get(t)})},h=function(){s.changeView("coupon",{couponList:d.coupon_list||[],propid:m?m.id:!1})},v=function(){if(!c)return void s.alert("请选择支付方式");var n=c,i=a.getShop(),r=a.getGPS(),d=a.getAddrMgr().getAddrById(l.addrId),u={postscript:l.comment||"",propcode:m?m.card_pwd:"",paytype:n.getPayType(),pay_platform:n.typeid,pidtrack:t.jsonEncode(a.getShoppingCart().getTrackInfo()),order_hash:p,location_hash:i.location_hash,display_dealer:i.shopId,display_addr:d.address,display_gps:d.lng+","+d.lat,display_time:i.dealer.timestamp||parseInt(Date.now()/1e3),location_conan:r&&r.success?r.longitude+","+r.latitude:"",location_time:r&&r.success?r.timestamp/1e3:""};$.extend(u,l),s.showLoading("提交订单中"),t.ajaxPost("/submit/makeOrder",u,function(i){if(s.hideLoading(),0==i.errno&&i.data.verify){var r=null,d=function(){if(!$(".dialog-content .dialog-input-btn").hasClass("disable")){var e=60;return t.ajaxPost("/submit/voiceCode",{},function(t){0==t.errno?($(".dialog-content .dialog-input-btn").addClass("disable").text("60s"),r=setInterval(function(){e--,$(".dialog-content .dialog-input-btn").text(e+"s"),0==e&&($(".dialog-content .dialog-input-btn").removeClass("disable").text("立即获取"),clearInterval(r))},1e3)):s.alert(t.errmsg)}),!1}},p=function(){return clearInterval(r),t.ajaxPost("/submit/voiceVerify",{code:$(".dialog-content .dialog-verify-code").val()},function(t){0==t.errno?v():s.alert(t.errmsg)}),!1};return void o.verify("语音验证","为保证鲜蜂侠顺利的为您服务，我们会验证您的手机号码。请留意010-52255400的免费来电。",d,p)}if(0==i.errno){var c=i.data,u={orderId:c.orderid,orderNo:c.orderno};a.getShoppingCart().reset(l.cart_group_id),n.getPayType()==e.PAYTYPE_ONLINE&&(u.payKey=n.key),s.changeView("order",u)}else s.alert(i.errmsg)})},b=function(t,e){"coupon"==t&&(e===!1||e&&e.card_pwd)?(m=null,f({propcode:e?e.card_pwd:"without"})):("order"==t||"orderlist"==t)&&("home"==s.viewMgr.name?s.viewMgr.clearToRoot():(s.viewMgr.clear(),s.switchNav()))},_=function(t){l=t.params,d=t.order,p=d.order_hash,y(d)};return{html:i,init:_,getTrackId:function(){return"submitorder_action"},onResume:b,onDestory:function(){c=u=l=d=m=null},action_selectPay:g,action_selectCoupon:h,action_submit:v}}});
/*!File[m/view_coupon.js]*/define("m/view_coupon",["m/utils"],function(n){var e={title:{left:"back",contentHtml:"我的优惠券",right:"[使用规则]",rightTap:"rules"},contentHtml:'<div class="main">\n<div class="coupon-bind">\n<form class="coupon-bind-form" onsubmit="return false;">\n<div class="inputwrap theme-spline">\n<input type="text" maxlength="10" class="inputwrap-input" placeholder="请输入优惠券号码" />\n<input type="submit" class="inputwrap-button theme-bg" value="绑定"/>\n</div>\n</form>\n</div>\n<div class="coupon-scroller scroller theme-spline spline-top">\n<div>\n<div class="coupon-nouse tap-action coupon-style" data-tap="select">不使用优惠券</div>\n<ul class="coupon-list"></ul>\n</div>\n</div>\n</div>'},s={couponItem:'<li class="coupon-item coupon-item-enable-#{enable} tap-action #{selected}" data-tap="select|#{id}" data-pwd="#{card_pwd}">\n<div class="coupon-info-left">\n<div class="coupon-item-value"><span class="sub">￥</span>#{valueStr}#{statusText}</div>\n<span class="coupon-show-reason tap-action" data-tap="disabledReason|#{id},#{reasonLength}" style="display:#{showReasonDisplay}">查看原因</span>\n</div>\n<div class="coupon-info-right">\n<fieldset class="coupon-item-fieldset">\n<legend class="coupon-item-name">#{name}</legend>\n<div class="coupon-item-time ui-ellipsis">#{start_time}至#{end_time}</div>\n<div class="coupon-item-description">#{description}</div>\n</fieldset>\n</div>\n<div class="coupon-item-radius coupon-item-radius-left"></div>\n<div class="coupon-item-radius coupon-item-radius-right">\n<div class="icon-ok"></div>\n</div>\n<div class="coupon-sp"></div>\n</li>\n<li class="coupon-reason coupon-reason-#{disabled} tap-action" data-tap="hideReason">\n<ul class="coupon-disabled-reason">#{disabledReason}</ul>\n</li>'};return function(i){var t,a=!1,o=!1,l=function(n,e){return n.disabled=n.disabled||0,$.formatString(s.couponItem,n,{showReasonDisplay:n.disabled_reasons&&n.disabled_reasons.length?"inline":"none",reasonLength:n.disabled_reasons?n.disabled_reasons.length:0,selected:e?"coupon-item-selected":"",statusText:function(){var e=!1;return 1==n.status?e="已使用":2==n.status?e="已过期":1==n.disabled&&(e="不可用"),e?'<br/><span class="status">'+e+"</span>":""},valueStr:function(){var e=parseFloat(n.value);return isNaN(e)?n.value:e},enable:void 0!==n.status?0==n.status:1!=n.disabled,disabledReason:function(){if(n.disabled_reasons&&n.disabled_reasons.length){var e=[];return $.each(n.disabled_reasons,function(n,s){e.push("<li>",s,"</li>")}),e.join("")}return""}})},c=function(){var e=[];$.each(t,function(n,s){e.push(l(s,s.id==o))}),e.length?(i[null!==o?"addClass":"removeClass"]("select-mode"),i.find(".coupon-list").html(e.join(""))):i.find(".coupon-list").html(n.renderEmptyNotice(null!==o?"暂无可用优惠券哦":"您还没有优惠券哦")),i.getScroller().refresh()},u=function(n){n.couponList?(t=n.couponList,a=!0,i.find(".coupon-nouse").css("display","block"),o=n.propid,c()):(i.showLoading(),o=null,base.ajaxPost("/submit/couponMy",{},function(n){i.hideLoading(),0==n.errno?(t=n.data,c()):i.tip(n.errmsg)})),i.delegate(".coupon-bind-form","submit",function(){var n=i.find(".inputwrap-input").val();if(n)return base.ajaxPost("/submit/couponBind",{propcode:n},function(n){0==n.errno?(i.find(".inputwrap-input").val(""),$.each(n.data,function(n,e){i.find(".coupon-list").prepend(l(e)),$.isArray(t)&&t.push(e)}),i.getScroller().refresh()):i.alert(n.errmsg)}),!1})};return{html:e,init:u,getTrackId:function(){return"coupon_action"},onDestory:function(){t=null},action_rules:function(){i.changeView("iframe",{title:"使用规则",url:"/show/webview?p=coupon",webview:!0})},action_select:function(n){if(a&&!$(this).hasClass("coupon-item-enable-false")){var e=!1;$.each(t,function(s,i){return i.id==n?(e=i,!1):void 0}),i.finishView(e)}},action_disabledReason:function(n,e){var s=$(this).parents(".coupon-item").next(".coupon-reason");parseInt(s.data("shown"))?s.css("height",0).data("shown",0):s.css("height",1.5*parseInt(e)+.2+"rem").data("shown",1),setTimeout(function(){i.getScroller().refresh()},600)},action_hideReason:function(){$(this).css("height",0).data("shown",0)}}}});
/*!File[m/view_detail.js]*/define("m/view_detail",["lib/base","common/shareUtils","m/utils","m/main"],function(e,i,t,n){var o={title:{left:"back",contentHtml:"",right:"[分享]",rightTap:"share"},contentHtml:'<div class="main scroller mod-productDetail">\n</div>\n<div class="footer-cart-circle theme-spline"></div>\n<div class="footer mod-product-ope padding-left theme-spline spline-top"> </div>'};return function(a){var d=function(o){a.headerLoading(80),o.name&&a.setTitle(o.name);var d=n.getShop();e.ajaxLoad(a.find(".main"),"/show/productDetail",{from:"vv",id:o.id,shopId:d.shopId,bigids:d.bigids,simulate_mobile:$.isSimulateMobile?"true":""},function(){a.headerLoading(100);var r=a.find(".product-detail-"+o.id).html(),s=e.jsonDecode(r),c=s.imgs&&s.imgs[0]||s.app_mimg;s&&(!o.name&&a.setTitle(s.name),a.showCartBtn(),a.bindShoppingOpe(),a.find(".footer").html("添加商品："+t.renderProducts(s,{showZero:!0,hideDel:!1,onlyOpe:!0})),a.find(".mod-banner-wrap").css("background-image","url("+c+")").data("src",c),n.getShoppingCart().addProductData(s),i.setShare({title:"爱鲜蜂-各种新鲜闪电送达",description:"#爱鲜蜂# "+s.name,imgUrl:s.app_mimg,link:"http://m.beequick.cn/show/productDetail?id="+s.id+"&shopId="+d.shopId}),a.find("img").on("load",function(){a.getScroller().refresh()}).each(function(e,i){var t=$(i),n=t.data("src");n&&(i.src=n)}))})};return{init:d,html:o,getTrackId:function(){return"goods_action"},getProductImgNode:function(){return a.find(".mod-banner-wrap")}}}});
/*!File[m/view_mine.js]*/define("m/view_mine",["m/main"],function(e){var n=[{key:"addrlist",name:"收货地址"},{key:"coupon",name:"优惠券"},{key:"idea",name:"意见反馈"},{key:"help",name:"帮助中心"},{key:"share",name:"分享给朋友"}],a=[{key:"11",name:"待付款"},{key:"12",name:"待收货"},{key:"15",name:"待评价"},{key:"17",name:"退款/售后"}],t={contentHtml:$.formatString('<div class="main">\n<div class="userinfo theme-bg">\n<div class="user">\n</div>\n</div>\n<div class="mine-content scroller">\n<div>\n<div class="block mine-order">\n<div class="tap-action theme-spline spline-bottom more padding" data-tap="order|0">\n<span class="theme-grayfont ui-float-right">查看全部订单</span>\n我的订单\n</div>\n<ul class="order-types cf">\n#{orderTypes}\n</ul>\n</div>\n<div class="block">\n<table width="100%">\n#{items}\n</table>\n</div>\n<div class="navs-holder"></div>\n</div>\n</div>\n</div>',{orderTypes:a.map(function(e){return $.formatString('<li class="order-type order-type-#{key} tap-action" data-tap="order|#{key}">#{name}</li>',e)}),items:function(){var e=[];return $.each(n,function(n,a){e.push($.formatString('<tr class="theme-spline spline-list more"><td class="mine-item mine-item-#{key} padding tap-action" data-tap="#{dataTap}">#{name}</td></tr>',a,{dataTap:"share"==a.key?"share":"item|"+a.key}))}),e.join("")}})};return function(n){var a=function(){n.find(".user").html(e.getUser().getRawPhone())},i=function(e){"share"==e||n.changeView(e)},r=function(e){var e=e||0;n.changeView("orderlist",{type:e})};return{html:t,init:a,getTrackId:function(){return"my_action"},action_item:i,action_order:r}}});
/*!File[m/view_orderlist.js]*/define("m/view_orderlist",["m/main","m/utils","m/OrderOperate"],function(e,r,t){var n=[{key:"0",name:"全部订单"},{key:"11",name:"待付款"},{key:"12",name:"待收货"},{key:"15",name:"待评价"},{key:"17",name:"退款/售后"}],o={title:{left:"back",right:"reload",contentHtml:"我的订单",className:"theme-spline"},contentHtml:'<div class="main">\n<ul class="tabs cf theme-spline"></ul>\n<div class="orders-wrap scroller">\n<ul class="orders">\n</ul>\n</div>\n</div>'},a={tab:'<li class="tab tab-type#{key} tap-action" data-tap="tabTap|#{key}"">#{name}</li>',order_btn:'<span class="order-action theme-bg"\ndata-type="#{type}"\ndata-orderid="#{orderid}"\ndata-orderno="#{orderno}">\n#{text}\n</span>',order:'<li class="order tap-action" data-tap="order_detail|#{id},#{order_no}">\n<div class="order-header">\n<span class="order-status">#{textStatus}</span>\n<span class="order-time">#{create_time}</span>\n</div>\n#{products}\n<div class="order-count">共#{buy_num}件商品&emsp;¥#{order_amount}</div>\n<div class="order-footer #{hideFooterClass}">\n#{btns}\n</div>\n</li>'};return function(e){var i,d,s,c,l,u=function(r){var t=n.map(function(e){return $.formatString(a.tab,e)}).join("");e.find(".tabs").html(t),m(r)},m=function(t){s=t,e.find(".tab").removeClass("theme-color theme-border-red-decorate"),e.find(".tab-type"+t).addClass("theme-color theme-border-red-decorate"),e.showLoading(),base.ajaxPost("/data/getOrderList",{type:t},function(t){if(0==t.errno){c=t.data,fs=$.formatString;var n=c.map(function(e){var t="",n=[],o="",i="order-footer-hide";return t=r.renderOrderImgs(e),e.buttons&&(n=e.buttons.filter(function(e){return!(!$.isWeixin&&4==e.type)})),n.length>0&&(i=""),o=n.map(function(r){return fs(a.order_btn,{orderid:e.id,orderno:e.order_no},r)}).join(""),fs(a.order,{products:t,hideFooterClass:i,btns:o},e)}).join("");n=n||r.renderEmptyNotice("还没有订单哦"),e.find(".orders").html(n),d.refresh()}else e.alert(t.errmsg);e.hideLoading()})},p=function(){e.replaceView("orderlist",{type:s})},f=function(r){i=r,d=e.getScroller(),u(r.type||0),l=new t(e.find(".orders-wrap"),{getOrder:function(e){var r=!1;return $.each(c,function(t,n){return n.id==e?(r=n,!1):void 0}),r}}),e.listen(l,"operateSuccess",function(r){var t=r.isSuccess,n=r.operation;t&&("delete"==n?e.finishView():p())}),e.listen(l,"openView",function(r){var t=r.order,n=r.operation,o=r.view;e.changeView(o,{order:t,operation:n})})};return{html:o,init:f,getTrackId:function(){return"order_action"},onResume:p,action_tabTap:m,action_reload:p,action_order_detail:function(r,t){e.changeView("order",{orderId:r,orderNo:t})}}}});
/*!File[m/view_order.js]*/define("m/view_order",["m/OrderOperate","m/utils","m/main"],function(e,t){var n={title:{left:"back",right:"reload",contentHtml:[{key:"timeline",name:"订单状态"},{key:"detail",name:"订单详情"}]},contentHtml:'<div class="main scroller"></div>\n<div class="order-footer"></div>\n<div class="order-welfare tap-action" data-tap="welfare">\n<div class="welfare-close tap-action" data-tap="welfareClose"></div>\n</div>'},r={main:'<ol class="order-tabpanel mod-order-timeline">#{status}</ol>\n<div class="order-tabpanel mod-order-detail" style="display:none">\n<div class="block">\n<table class="detail-table">\n<tr>\n<th>订单号</th>\n<td>#{order_no}</td>\n</tr>\n<tr>\n<th>收货码</th>\n<td>#{checknum}</td>\n</tr>\n<tr>\n<th>下单时间</th>\n<td>#{create_time}</td>\n</tr>\n<tr>\n<th>收货时间</th>\n<td>#{accept_time}</td>\n</tr>\n<tr>\n<th>支付方式</th>\n<td>#{payMethod}</td>\n</tr>\n</table>\n</div>\n<div class="block">\n<table class="detail-table">\n<tr>\n<th>收货人</th>\n<td><span class="ui-float-right">#{telphone}</span>#{accept_name}</td>\n</tr>\n<tr>\n<th>收货地址</th>\n<td>#{address}</td>\n</tr>\n</table>\n</div>\n<div class="block">\n<div class="products-title">费用明细</div>\n#{products}\n<ul class="fee-list theme-spline spline-top">#{feeList}</ul>\n<div class="theme-spline spline-top cf">\n<span class="ui-float-right">\n实付&nbsp;&nbsp;&nbsp;&nbsp;<span class="theme-redfont">￥#{real_amount_float}</span>\n</span>\n</div>\n</div>\n</div>',fee:'<li><span class="ui-float-right">￥#{valueFloat}</span>#{text}</li>',step:'<li class="step clearfix">\n<span class="step-time">#{status_time}</span>\n<span class="step-title">#{status_title}</span>\n<span class="step-desc">#{status_desc}</span>\n</li>',btn:'<span class="order-action theme-bg"\ndata-type="#{type}"\ndata-orderid="#{orderid}"\ndata-orderno="#{orderno}">\n#{text}\n</span>'};return function(a){var o,d,i,s,l=function(e){a.find(".order-tabpanel").hide(),a.find(".mod-order-"+e).show(),o.refresh()},c=function(e,n,l){a.showLoading(),base.ajaxPost("/data/getOrderDetail",{orderid:e,orderno:n},function(e){if(0==e.errno){i=e.data;var n,c,p,f,u=i.status_timeline,h=[],m=i.fee_list,v="",_=i.order_goods,b="noFooter",w=$.formatString;n=u.map(function(e){return w(r.step,{status_desc:e.status_desc.replace(/%(\S+)%:\{(\d{11})\}/,'$1:<a class="phone" href="tel:$2">$2</a>')},e)}).join(""),i.detail_buttons.forEach(function(e){($.isWeixin||4!=e.type)&&h.push(e)}),i.detail_buttons&&(h=i.detail_buttons.filter(function(e){return!(!$.isWeixin&&4==e.type)})),h.length>0&&(b=""),c=h.map(function(e){return w(r.btn,{orderid:i.id,orderno:i.order_no},e)}).join(""),v=m.map(function(e){return w(r.fee,e,{valueFloat:parseFloat(e.value)})}).join(""),p=t.renderOrderProduct(_),f=w(r.main,{status:n,feeList:v,real_amount_float:parseFloat(i.order_amount),payMethod:0==i.pay_type?"货到付款":"在线支付",products:p},i),a.containerNode.addClass(b).find(".main").html(f),a.find(".order-footer").html(c),o.refresh(),l&&1==i.pay_type&&1!=i.pay_status?d._pay(l):s.welfare&&a.find(".order-welfare").css("display","block")}else a.alert(e.errmsg);a.hideLoading()})},p=function(t){s=t,o=a.getScroller(),c(t.orderId,t.orderNo,t.payKey),d=new e(a.find(".order-footer"),{getOrder:function(){return i}}),a.listen(d,"operateSuccess",function(e){var t=e.isSuccess,n=e.operation;if(t)if("delete"==n)a.finishView();else{var r={orderId:s.orderId,orderNo:s.orderNo};s.payKey&&"pay"==n&&(r.welfare=!0),a.replaceView("order",r)}}),a.listen(d,"openView",function(e){var t=e.order,n=e.operation,r=e.view;a.changeView(r,{order:t,operation:n})})},f=function(){a.replaceView("order",{orderId:s.orderId,orderNo:s.orderNo})};return{html:n,init:p,getTrackId:function(){return"order_detail_action"},onResume:f,onBeforeBack:function(){return window.location.href.indexOf("forward")>0&&"boot"==a.viewMgr.name?(history.back(),!1):void 0},action_titleTab:l,action_reload:function(){a.replaceView("order",{orderId:s.orderId,orderNo:s.orderNo})},action_welfare:function(){d._welfare(s.orderId,s.orderNo),a.find(".order-welfare").css("display","none")},action_welfareClose:function(){a.find(".order-welfare").css("display","none")}}}});
/*!File[m/view_msg.js]*/define("m/view_msg",function(){var n={title:{left:"back",contentHtml:[{key:"sys",name:"系统消息"},{key:"user",name:"用户消息"}]},contentHtml:'<div class="main"></div>'};return function(){var t=function(n){console.log(n)},e=function(){console.log("nit")};return{html:n,init:e,action_titleTab:t}}});
/*!File[m/view_help.js]*/define("m/view_help",["m/main"],function(n){var i={title:{left:"back",contentHtml:"帮助中心"},contentHtml:'<div class="main scroller">\n<div>\n<div class="block">\n<a class="theme-spline spline-list padding more" href="tel:4008484842" style="display:block;">\n客服电话：400-8484-842\n</a>\n<div class="theme-spline spline-list padding more tap-action" data-tap="qa">常见问题</div>\n<div class="theme-spline spline-list padding more tap-action" data-tap="changeView|about">关于我们</div>\n</div>\n<div class="theme-btn-light tap-action" data-tap="logout">退出当前帐号</div>\n</div>\n</div>'};return function(t){var e=function(){};return{init:e,html:i,getTrackId:function(){return"help_action"},action_qa:function(){t.changeView("iframe",{url:"/show/webview?p=qa",title:"常见问题",webview:!0})},action_logout:function(){t.showLoading("退出中"),n.getUser().logout(function(){t.hideLoading()})}}}});
/*!File[m/view_home.js]*/define("m/view_home",["lib/Performance","lib/NewSlider","common/weixinUtils","m/main","m/utils"],function(t,e,a,i,n){var s={title:{left:"scanact",right:"search[搜&nbsp;索&nbsp;]",rightTap:"changeView|search",contentHtml:"加载中",className:"theme-bg theme-border"},contentHtml:'<div class="main scroller">\n<div class="home-content">\n<div class="main-acts acts-empty"></div>\n<fieldset class="main-hot theme-spline spline-top scroller-firstin" data-offset="300">\n<legend class="theme-grayfont">鲜蜂热卖</legend>\n<ul class="main-hot-list cf"></ul>\n<div class="main-hot-footer theme-grayfont tap-action" data-tap="switchNav|menu">点击查看全部商品&gt;</div>\n</fieldset>\n<div class="navs-holder"></div>\n</div>\n<div class="home-error"></div>\n</div>'},c={distance:'<div class="home-distance tap-action" data-tap="distance"><span class="ui-float-right">╳</span>当前收货地址不在您的附近</div>',longTap:"爱鲜蜂线下配送点：<br/>#{number}(#{WorkBegin}-#{WorkEnd})"},o={focus:{type:"focus",tpl:'<div class="acts-block acts-focus">#{act_rows}</div>',item_tpl:'<div class="acts-focus-item tap-action" #{jump} style="background-image:url(#{img});"></div>'},icon:{tpl:'<ul class="acts-block acts-icon theme-spline cf">#{act_rows}</ul>',item_tpl:'<li class="acts-icon-item tap-action" #{jump}>\n<div class="acts-icon-item-img" style="background-image:url(#{img})"></div>\n<p class="acts-icon-item-name">#{name}</p>\n</li>'},headline:{tpl:'<div class="acts-block acts-headline cf">\n<span class="acts-headline-head" style="background-image:url(#{head_img})">鲜蜂头条</span>\n<ul class="acts-headline-list theme-spline theme-grayfont">#{act_rows}</ul>\n</div>',item_tpl:'<li class="acts-headline-item ui-ellipsis tap-action" #{jump}>\n<span class="pm-embossed">#{title}</span>\n<span class="acts-headline-item-text">#{content}</span>\n</li>',item_tpl_opts:{title:function(t,e){return e.headline_detail.title},content:function(t,e){return e.headline_detail.content}}},brand:{tpl:'<ul class="acts-block acts-brand cf">#{act_rows}</ul>',item_tpl:'<li class="acts-brand-item theme-spline tap-action" #{jump} style="background-image:url(#{img})"></li>'},scene:{tpl:'<ul class="acts-block acts-scene cf">#{act_rows}</ul>',item_tpl:'<li class="acts-scene-item theme-spline tap-action" #{jump} style="background-image:url(#{img})"></li>'},category:{tpl:'<ul class="acts-category cf">#{act_rows}</ul>',item_tpl:'<li class="acts-block acts-category-item">\n<div class="acts-category-item-header cf">\n<span class="acts-category-item-header-title" style="color:##{titleColor};border-color:##{titleColor}">#{title}</span>\n<span class="acts-category-item-header-more theme-grayfont tap-action" data-tap="category|#{category_id}">更多&nbsp;&gt;</span>\n</div>\n<div class="acts-category-item-banner tap-action scroller-lazyload" #{jump} data-src="#{img}"></div>\n<ul class="acts-category-item-goodsList cf">#{goods}</ul>\n</li>',item_tpl_opts:{title:function(t,e){return e.category_detail.name},titleColor:function(t,e){return e.category_detail.category_color},goods:function(t,e){return n.renderProducts(e.category_detail.goods,{customClass:"theme-spline",columns:3,hideDel:!0})},category_id:function(t,e){return e.category_detail.category_id}}}},l=!1;return function(r){function d(t){var a=$.formatString,i=t.map(function(t){var e=o[t.type];if(!e)return"";if(t&&t.act_rows&&t.act_rows.length>0){var i=function(){var a=e.tpl_opts||{},i={};for(key in a)i[key]=$.isFunction(a[key])?a[key].bind(a,t):a[key];return i}(),n=t.act_rows.map(function(i){var n=function(){var a=e.item_tpl_opts||{},n={};for(key in a)n[key]=$.isFunction(a[key])?a[key].bind(a,t,i):a[key];return n.jump=' data-tap="jump|'+i.activity.id+","+i.activity.jptype+'" ',n}();return a(e.item_tpl,n,i.activity)}).join("");return a(e.tpl,{act_rows:n},i,t)}return""}).join("");r.find(".main-acts").removeClass("acts-empty").html(i),r.find(".main-hot").addClass("scroller-firstin").find(".main-hot-list").empty(),u&&u.destroy(),p&&p.destroy(),u=new e({wrap:r.find(".acts-focus"),slideSelect:".acts-focus-item"}),p=new e({wrap:r.find(".acts-headline-list"),slideSelect:".acts-headline-item",isVertical:!0,size:"2.2rem",interval:4500}),r.getScroller().refresh().scrollTo()}function m(t){t.dealer&&base.ajaxPost("/data/homeHotProducts",{location:(t.dealer.longitude||t.dealer.lng)+","+(t.dealer.latitude||t.dealer.lat),bigids:t.dealer.bigids,zchtid:t.dealer.zchtid},function(t){if(0==t.errno&&t.data.length){var e=n.renderProducts(t.data);r.find(".main-hot").css("display","block").find(".main-hot-list").html(e),r.getScroller().refresh()}else r.find(".main-hot").css("display","none")})}var u,p,f=!1,g=function(t){if(l)return void(r.find(".home-distance").remove().length&&r.getScroller().refresh());var e=t.getUserAddr();e&&(l=!0,i.getGPS(function(t){if(t.success){var a=base.distanceOfTwoPoints(t.longitude,t.latitude,e.lng,e.lat);2e3>a||(r.find(".home-content").prepend(c.distance),r.getScroller().refresh())}}))},h=function(){var e=i.getShop();if("loading"==e.status)r.showLoading();else if("done"==e.status){var a=e.act_info;r.removeClass("haderr"),r.hideLoading(),d(a,r),g(e),t.makeTime("listShow").addData("cityid",e.dealer.cityid).report()}else r.addClass("haderr"),r.hideLoading(),r.find(".home-error").html(n.renderEmptyNotice(e.statusText))},y=function(){var t=i.getShop();r.setTitle('<span class="title-addrname">'+(t.addrName||"加载中")+"</span>"),r.listen(i.getShop(),"progressing",h),r.listen(t,"addrNameChange",function(){r.setTitle('<span class="title-addrname">'+(t.addrName||"加载中")+"</span>")}),r.listen(r.getScroller(),"firstin",function(){m(i.getShop(),r)}),h(),r.bindShoppingOpe(),r.find(".header-icon-scanact").on("longTap",_),r.find(".header-content").on("longTap",function(e){r.alert($.formatString(c.longTap,t.dealer)),e.stopPropagation(),e.preventDefault()}),window.home_changeView=function(t,e){r.changeView(t,e)}},v=function(t){if(0==t.indexOf("activity://")){var e=base.jsonDecode(t.replace("activity://","")),a=i.getShop();if(!e)return;e&&e.ext_params&&(e.ext_params.bigids=a.bigids,e.ext_params.cityid=a.cityid),r.changeView("act",{activityObj:e})}},_=function(){$.isWeixin?a.scanQRCode(function(t,e){t&&v(e)}):$.isBaiduapp&&window.clouda&&window.clouda.device.qr.startCapture({onsuccess:v,onfail:function(){alert(Array.prototype.join.call(arguments,","))},type:clouda.device.QR_TYPE.QRCODE})},b=function(){u&&u.destroy(),p&&p.destroy(),u=null,p=null};return{html:s,init:y,getTrackId:function(){return f||"home_action"},onResume:function(){f=!1,r.getScroller().refresh()},onDestory:b,action_jump:function(t,e){if(1==e){var a=i.getShop().getActivityById(t);a.trackid&&(f=a.trackid),r.changeView("act",{activityObj:a})}else 4==e&&r.switchNav("menu")},action_switchNav:function(t){r.switchNav(t)},action_category:function(t){r.switchNav("menu",{categoryId:t})},action_titleTap:function(){r.changeView("addrlist",{isSelect:!0,showGps:!0})},action_distance:function(){$(this).remove(),r.getScroller().refresh()}}}});
/*!File[m/view_idea.js]*/define("m/view_idea",["m/main"],function(){var e={title:{left:"back",contentHtml:"意见反馈"},contentHtml:'<div class="main theme-bg-white"></div>'},t={form:'<form class="idea-form" onsubmit="return false">\n<p class="idea-form-desc">您的批评和建议能帮助我们更好完善产品，请留下您的宝贵意见！</p>\n<ul class="idea-form-types cf">\n#{feedback_types}\n</ul>\n<input type="hidden" name="type"/>\n<textarea class="theme-bg-gray theme-spline" name="comment" placeholder="请输入宝贵意见(300字以内)"></textarea>\n<button class="idea-submit theme-bg theme-border tap-action" type="submit" maxlength="2" data-tap="submit">提交</button>\n</form>',feedback_type:'<li><span class="idea-form-type theme-spline theme-grayfont tap-action" data-tap="select_type|#{id}">#{comments}</span></li>'};return function(a){function n(e){var t=$(this),n=a.find(".idea-form-type"),i=a.find('input[name="type"]');n.removeClass("theme-bg theme-border"),i.val()==e?i.val(""):(i.val(e),t.addClass("theme-bg theme-border"))}function i(){var e=a.find('input[name="type"]').val(),t=a.find("textarea").val();return t?t.length<5?void a.tip("这里要给我们五个字以上的建议哦"):e?(a.showLoading("正在发送"),void base.ajaxPost("/submit/feedback",{ftid:e,msg:t},function(e){a.hideLoading(),0==e.errno?(a.tip("您的意见已收到，感谢您的支持！"),a.finishView(null,!0)):a.alert(e.errmsg)})):void a.tip("请您选择反馈类型"):void a.tip("您还没有给我们写下意见呢")}var m=function(){a.showLoading(),base.ajaxGet("/data/feedbackTypes",{},function(e){var n=$.formatString;if(0==e.errno){var i=$.map(e.data,function(e){return n(t.feedback_type,e)}).join(""),m=n(t.form,{feedback_types:i});a.find(".main").html(m)}else a.alert(e.errmsg);a.hideLoading()})};return{init:m,html:e,action_submit:i,action_select_type:n}}});
/*!File[m/view_iframe.js]*/define("m/view_iframe",["lib/base","m/utils"],function(t,n){var i={title:{left:"back",contentHtml:"加载中"},contentHtml:'<div class="main"><iframe class="iframe"></iframe></div>'};return function(e){var l,a=!1,o=function(i){a=!!i.webview,i.title?e.setTitle(i.title):a||(l.onload=function(){e.setTitle(this.title)}),a?t.ajaxLoad(function(t){e.headerLoading(50),n.appendHtmlContent(e.find(".main").html(""),t,function(t){e.headerLoading(t)})},i.url,{}):(l=e.find(".iframe")[0],l.src=i.url)},r=function(){a||(l.onload=null,l=null)};return{html:i,init:o,onDestory:r}}});
/*!File[m/view_menu.js]*/define("m/view_menu",["m/main","m/utils","lib/Scroller"],function(t,e){var r={title:{right:"search[搜&nbsp;索&nbsp;]",rightTap:"changeView|search",contentHtml:"加载中",className:"theme-bg theme-border"},contentHtml:'<div class="main" class="diaplay:none">\n<div data-scroller="categories" class="categories-wrap scroller">\n<ul class="categories"><ul>\n</div>\n<div data-scroller="productList" class="productList-wrap scroller">\n<ul class="productList"></ul>\n</div>\n<div class="product-filter tap-action" data-tap="expandFilter">\n<ul class="filter-titles theme-spline spline-bottom"></ul>\n<ul class="filter-items cf"></ul>\n</div>\n<div class="menu-error"></div>\n</div>'},a={category:'<li class="categories-item theme-spline tap-action categories-item#{id}" data-categoryId=#{id} data-tap="categoryTap|#{id}" #{flagBg}>#{name}</li>',filterTitle:'<li class="filter-title filter-title-sub tap-action" data-tap="expandFilter|sub">#{name}&nbsp;</li><li class="filter-title filter-title-sort tap-action" data-tap="expandFilter|sort">#{sortName}&nbsp;</li>',filterItem:'<li class="filter-item filter-item-#{type} tap-action #{className}" data-tap="categoryTap|#{categoryId},#{subIdx},#{sortIdx}">#{name}</li>',navsHolder:'<li class="navs-holder"></li>',filterHolder:'<li class="filter-holder"></li>'},i=[{name:"综合排序"},{name:"销量最高",fn:function(t,e){return parseInt(e.product_num)-parseInt(t.product_num)}},{name:"价格最低",fn:function(t,e){return parseFloat(t.price)-parseFloat(e.price)}},{name:"价格最高",fn:function(t,e){return parseFloat(e.price)-parseFloat(t.price)}}];return function(n){var s,o,l,d=null,c=!1,u={},p={},f=function(){var t=d.addrName||"加载中";n.setTitle('<span class="title-addrname">'+t+"</span>"),"loading"==d.status?n.showLoading("解析中"):n.hideLoading()},m=function(t){if(t){var e,r=$.formatString;p={},e=t.categories.map(function(e){return p[e.id]=e.cids,u[e.id]={cids:e.cids,name:e.name,products:t.products[e.id]},r(a.category,e,{flagBg:e.flag?'style="background-image:url('+e.flag+');"':""})}).join(""),e+=a.navsHolder,n.find(".categories").html(e),h(s||t.categories[0].id),s&&(s=!1)}},g=function(t,r){var i=[],s={isPortrait:!1,itemDetail:!0},o=Math.max(100*(r-1)+20,0),l=100*r+20,d=t.length;for(0==o&&i.push(a.filterHolder);l>o&&d>o;o++)i.push(e.renderProducts(t[o],s));o==d?i.push(a.navsHolder):setTimeout(function(){g(t,r+1)},r?50:500),n.find(".productList").append(i.join("\n")),0==r||l>=d?n.getScroller("productList").refresh().scrollTo(0,0):l>=d&&n.getScroller("productList").refresh()},h=function(t,e,r){if(t){e=e||0,r=r||0,n.find(".categories-item").removeClass("theme-border-decorate"),n.find(".categories-item"+t).addClass("theme-border-decorate"),n.find(".productList").html("");var s,o,l=u[t].products;p[t]&&p[t][e]?(s=p[t][e],o=parseInt(s.id),o&&(l=l.filter(function(t){return t.child_cid==o}))):s={id:0,name:"全部分类"};var d;(d=i[r].fn)&&(l=l.map(function(t){return t}).sort(d)),g(l,0),n.find(".product-filter").removeClass("expand expand-sub expand-sort"),n.find(".filter-titles").html($.formatString(a.filterTitle,s,{categoryId:t,sortName:i[r].name})),n.find(".filter-items").html(p[t].map(function(i,n){return $.formatString(a.filterItem,i,{categoryId:t,subIdx:n,type:"sub",sortIdx:r,className:n==e?"theme-border":""})}).concat(i.map(function(i,n){return $.formatString(a.filterItem,i,{categoryId:t,subIdx:e,type:"sort",sortIdx:n,className:n==r?"theme-border":""})})).join(""))}},v=function(){return d&&d.shopId!=c?(c=d.shopId,n.showLoading(),"done"==d.status?(n.removeClass("haderr"),base.ajaxGet("/data/getCategoryProduct",{zchtid:d.shopId,bigids:d.dealer.bigids},function(t){0==t.errno?m(t.data):n.alert(t.errmsg),n.hideLoading()})):("error"==d.status||"unsupport"==d.status)&&(n.hideLoading(),n.addClass("haderr"),n.find(".menu-error").html(e.renderEmptyNotice(d.statusText))),!0):!1},I=function(e){d=t.getShop(),s=e.categoryId,o=n.getScroller("categories"),l=n.getScroller("productList"),n.listen(d,"progressing",function(){f(),n.isShowing()&&v()}),f(),v(),n.bindShoppingOpe()},b=function(){d=null};return{init:I,html:r,getTrackId:function(){return"category_action"},onDestory:b,action_titleTap:function(){n.changeView("addrlist",{isSelect:!0,showGps:!0})},action_categoryTap:h,action_expandFilter:function(t){var e=n.find(".product-filter"),r=e.hasClass("expand-"+t);e.removeClass("expand expand-sort expand-sub"),t&&!r&&n.find(".product-filter").addClass("expand expand-"+t)},onResume:function(t,e){v()?e&&e.categoryId&&(s=e.categoryId):e&&e.categoryId?h(e.categoryId):n.getScroller("productList").refresh()}}}});
/*!File[m/view_cancel.js]*/define("m/view_cancel",["lib/Storage"],function(){var e={title:{left:"back",contentHtml:"取消订单"},contentHtml:'<div class="mod-cancel main main-top scroller">\n<form class="cancel-form" onsubmit="return false;">\n<ul class="id-hasReceived hasReceived block">\n<li class="tap-action line theme-spline" data-tap="chose_hasReceived|0">我没收到货</li>\n<li class="tap-action line" data-tap="chose_hasReceived|1">我收到货了</li>\n</ul>\n<div class="id-chose-reason block line line-arrow-down tap-action" data-tap="chose_reason">请选择理由</div>\n<input class="id-hidden-hasReceived" type="hidden" name="uapt_goods"/>\n<input class="id-hidden-reason" type="hidden" name="ctype"/>\n<div class="theme-btn-full tap-action" data-tap="submit">提交</div>\n</form>\n</div>'},n={option:'<option value="#{key}">#{item}</option>'};return function(i){var a,t=function(){function e(e,i){var a=[];for(var o in i)a.push(t(n.option,{key:o,item:i[o]}));e.html(a.join(""))}var t=$.formatString;e(i.find(".cancelReason1"),a.cancel_select_msg),e(i.find(".cancelReason2"),a.cancel_select_msg_1),i.find(".cancel-reason1").show()},o=function(e){$(this).siblings().removeClass("line-selected"),$(this).addClass("line-selected"),i.find(".id-hidden-hasReceived").val(e)},d=function(){i.find(".id-hidden-reason").val("");var e,n=i.find(".id-hidden-hasReceived").val();if("0"==n)e=a.cancel_select_msg;else{if("1"!=n)return void i.tip("请选择取消类型");e=a.cancel_select_msg_1}var t=[];for(var o in e)t.push({key:o,name:e[o]});i.popSelect({title:"请选择取消原因",items:t,onselect:function(n){i.find(".id-chose-reason").html(e[n]),i.find(".id-hidden-reason").val(n)},oncancel:function(){i.find(".id-chose-reason").html("请选择理由")}})},s=function(){var e=i.find(".id-hidden-hasReceived").val(),n=i.find(".id-hidden-reason").val();return e?n?(i.showLoading("提交中"),void base.ajaxPost("/submit/cancelOrderV2",{orderId:a.id,orderNo:a.order_no,ctype:n,uapt_goods:e},function(e){0==e.errno?(i.tip("提交成功，正在为您处理，请稍后"),i.finishView()):i.alert(e.errmsg),i.hideLoading()})):void i.tip("请选择取消原因"):void i.tip("请选择取消类型")},c=function(e){a=e.order,t()};return{html:e,init:c,action_chose_hasReceived:o,action_chose_reason:d,action_submit:s}}});
/*!File[m/view_comment.js]*/define("m/view_comment",["lib/Storage","m/utils"],function(a,t){var s={1:"很差",2:"不满意",3:"一般",4:"满意",5:"很满意"},n={title:{left:"back",contentHtml:"评价"},contentHtml:'<div class="main scroller">\n\n</div>'},e={main:'<div class="order theme-grayfont">\n<span class="attr">订<span class="blank"></span>单<span class="blank"></span>号</span>\n<span>#{order_no}</span>\n<br/>\n<span class="attr">下单时间</span>\n<span>#{create_time}</span>\n</div>\n<div class="order-imgs">#{imgs}</div>\n<div class="block clearfix">\n<div class="comment-title">请您评价</div>\n<ul class="star-list">\n<li class="star empty tap-action" data-star="1" data-tap="star_tap"></li>\n<li class="star empty tap-action" data-star="2" data-tap="star_tap"></li>\n<li class="star empty tap-action" data-star="3" data-tap="star_tap"></li>\n<li class="star empty tap-action" data-star="4" data-tap="star_tap"></li>\n<li class="star empty tap-action" data-star="5" data-tap="star_tap"></li>\n</ul>\n<div class="star-label theme-grayfont"></div>\n</div>\n<ul class="tags tags-bad" style="display:none">#{badTags}</ul>\n<ul class="tags tags-good" style="display:none">#{goodTags}</ul>\n<form class="id-comment-form" onsubmit="return false;">\n<textarea class="id-textarea" name="msg" rows="5" placeholder="您可以从商品质量，配送，服务态度等方面来发表评价（200子以内）" ></textarea>\n<input class="id-hidden-star" type="hidden" name="star"/>\n<input class="id-hidden-tags" type="hidden" name="tag"/>\n<div class="theme-btn-full tap-action" data-tap="submit">提交评价</div>\n</form>',tag:'<li class="comment-tag theme-border-gray theme-grayfont tap-action" data-tap="select_tag|#{id}">#{comments}</li>'};return function(a){var i,d,r=function(){a.showLoading(),base.ajaxGet("/data/feedbackCommentTags",{},function(t){0==t.errno?(d={good:[],bad:[]},t.data.forEach(function(a){"11100"==a.star?d.bad.push(a):"00011"==a.star&&d.good.push(a)}),l()):a.alert(t.errmsg),a.hideLoading()})},l=function(){if(i&&d){var s,n,r,l=$.formatString;s=t.renderOrderImgs(i),r=d.good.map(function(a){return l(e.tag,a)}).join(""),n=d.bad.map(function(a){return l(e.tag,a)}).join("");var o=l(e.main,{imgs:s,badTags:n,goodTags:r},i);a.find(".main").html(o)}},o=function(){var t=$(this),n=parseInt(t.data("star")),e=a.find(".id-hidden-star").val();if(n!=e){a.find(".star").each(function(a,t){targetClass=n<parseInt($(t).data("star"))?"empty":"full",$(t).removeClass("empty full").addClass(targetClass)}),4>n?a.find(".tags-bad").show().siblings(".tags").hide():a.find(".tags-good").show().siblings(".tags").hide();var i,d="selected theme-bg theme-border theme-color-white",r="theme-border-gray theme-grayfont";4>n&&e>3?i=a.find(".tags-good li"):n>3&&4>e&&(i=a.find(".tags-bad li")),i&&(i.removeClass(d).addClass(r),a.find(".id-hidden-tags").val("")),a.find(".star-label").text(s[t.index()+1]),a.find(".id-hidden-star").val(n)}},c=function(t){var s=$(this),n="selected theme-bg theme-border theme-color-white",e="theme-border-gray theme-grayfont",i=a.find(".id-hidden-tags");vals=i.val().split(",").filter(function(a){return""!==a}),s.hasClass(n)?(s.removeClass(n).addClass(e),vals=vals.filter(function(a){return a!=t})):(s.addClass(n).removeClass(e),vals.push(t)),i.val(vals.join(","))},m=function(){var t=a.find(".id-hidden-star").val(),s=a.find(".id-hidden-tags").val(),n=a.find(".id-textarea").val();return t?(a.showLoading("提交中"),void base.ajaxPost("/submit/orderComment",{orderId:i.id,orderNo:i.order_no,star:t,tags:s,comments:n},function(t){0==t.errno?(a.tip("评价成功！"),a.finishView()):a.alert(t.errmsg),a.hideLoading()})):void a.tip("请选择评价等级")},g=function(a){i=a.order,r()};return{html:n,init:g,onDestory:function(){i=d=null},action_star_tap:o,action_select_tag:c,action_submit:m}}});
/*!File[m/view_search.js]*/define("m/view_search",["lib/Storage","m/utils","m/main"],function(s,t,i){var e={title:{left:"back",right:"[搜索]",rightTap:"submit",contentHtml:{placeholder:"请输入商品名称"}},contentHtml:'<div class="main scroller" data-scrollerId="main">\n<div>\n<div class="sug">\n<span class="sug-label">热门搜索</span>\n<ul class="sug-list sug-list-hot cf"></ul>\n<span class="sug-label history-node">历史记录</span>\n<ul class="sug-list sug-list-history cf history-node"></ul>\n<div class="tap-action sug-clear history-node" data-tap="clear">清空历史</div>\n</div>\n<div class="result">\n<div class="result-none-notice result-none-node">\n<h5>暂时没搜到“<span class="search-words"></span>”相关商品</h5>\n您可以更换其他关键词试试看\n</div>\n<span class="sug-label result-none-node">大家都在买</span>\n<ul class="result-list mod-product-cube  mod-pub-product cf"></ul>\n<p class="result-nomore">无更多商品</p>\n</div>\n</div>\n</div>'},a={sugItem:'<li class="sug-item tap-action" data-tap="search|#{name},#{source}">#{name}</li>'},r={INPUT:0,HOT:1,HISTORY:2},n=function(t,i){this.view=t,this.postParam=i,this.storage=new s("search");var e=this.storage.get("history");this.historys=e?e.split(","):[],this.isSearchState=!1};return n.prototype={search:function(s,t){this.isSearchState=!0,this.curIndex=0,this.hasNext=!0,this.query=s,this.source=t,this._addHistory(s),this.view.find(".search-words").text(s),t!=r.INPUT&&this.view.find(".search-query").val(s),this._loadData()},_loadData:function(){if(this.hasNext&&!this.isLoadingData&&this.isSearchState){this.isLoadingData=!0;var s=this;0==this.curIndex?this.view.showLoading("搜索中"):this.view.headerLoading(80),base.ajaxPost("/submit/search",$.extend(this.postParam,{index:s.curIndex,query:s.query,source:s.source}),function(t){return s.isLoadingData=!1,0==s.curIndex?s.view.hideLoading():s.view.headerLoading(100),t.errno?(s.view.tip(t.errmsg),s.hasNext=!1,void(s.hasResult=!1)):t.data&&t.data.activity&&t.data.activity.id?void s.view.changeView("act",{activityObj:t.data.activity}):(s.hasNext=parseInt(t.data.has_next),s.hasResult=1==t.data.type?!1:!0,s.goods=t.data.goods,s._renderResult(),void(s.curIndex+=1))})}},_renderResult:function(){this.view.removeClass("state-sug"),this.view.addClass("state-result"),this.view.find(".result")[this.hasResult?"removeClass":"addClass"]("result-none"),this.view.find(".result-list")[0==this.curIndex?"html":"append"](t.renderProducts(this.goods)),this.view.find(".result-nomore").css("display",this.hasNext?"none":"block"),this.view.getScroller().refresh(),0==this.curIndex&&this.view.getScroller().scrollTo()},renderSug:function(){this.view.removeClass("state-result"),this.view.addClass("state-sug");var s=this;this.isSearchState=!1,this.view.showLoading("加载中"),base.ajaxGet("/data/searchHot",this.postParam,function(t){s.view.hideLoading();var i;t.errno&&(i="水果,精选,饮料,零食".split(",")),i=t.data&&t.data.hotquery?t.data.hotquery:i,s._renderLabelList(s.view.find(".sug-list-hot"),i,r.HOT),s._renderLabelList(s.view.find(".sug-list-history"),s.historys,r.HISTORY),s.historys.length?s.view.removeClass("no-history"):s.view.addClass("no-history"),s.view.getScroller().refresh().scrollTo()})},clearHistory:function(){this.view.addClass("no-history"),this.historys=[],this.storage.set("history","")},_renderLabelList:function(s,t,i){var e,r,n=[];for(e=0,r=t.length;r>e;e++)n.push($.formatString(a.sugItem,{name:t[e],source:i}));s.html(n.join(""))},_addHistory:function(s){this.view.removeClass("no-history");var t=!1;return 1==this.historys.length?t=s==this.historys[0]:this.historys.sort(function(i,e){return i==s?(t=!0,-1):e==s?(t=!0,1):0}),t||this.historys.unshift(s),this.historys.length>10&&(this.historys.length=10),this.storage.set("history",this.historys.join(",")),this._renderLabelList(this.view.find(".sug-list-history"),this.historys,r.HISTORY),this.view.getScroller().refresh().scrollTo(),this.historys}},function(s){var t,a=function(s,i){t.search(s,i)},o=function(){var i=$.trim(s.find(".title-form-query").val());i&&(t.search(i,r.INPUT),s.find(".title-form-query")[0].blur())},h=function(){var e=i.getShop();t=new n(s,{shopId:e.shopId,bigids:e.dealer.bigids}),t.renderSug(),s.bindShoppingOpe(),s.listen(s.getScroller(),"scroll",function(){t.isSearchState&&this.isBottom(this.wrapperWidth)&&t._loadData()}),s.delegate(".title-form","submit",o),s.showCartBtn()},l=function(){t=null};return{html:e,init:h,getTrackId:function(){return"search_action"},onDestory:l,action_search:a,action_submit:o,action_clear:function(){t.clearHistory()}}}});
/*!File[m/view_verify.js]*/define("m/view_verify",["m/main"],function(n){var i={title:{left:"back",contentHtml:"验证手机"},contentHtml:'<div class="main">\n<form id="autocomplete-form" class="mod-order-common login-form" onsubmit="return false;">\n<div class="pic theme-bg">\n<p class="pic-word">为了方便您及时查询订单信息，鲜蜂侠需要验证您的手机号为查询帐号</p>\n</div>\n<div class="inputs block">\n<div class="padding-small theme-spline spline-bottom">\n<input name="phone" id="autocomplete-phone" class="phone login-input-phone login-input fix-undo" type="tel" placeholder="手机号码" />\n<span class="submit login-send theme-bg">获取验证码</span>\n</div>\n<div class="padding-small">\n<input type="number" class="code login-input-code login-input fix-undo" placeholder="短信验证码" />\n</div>\n</div>\n<p class="login-voice-wrap">收不到短信？使用<span class="ui-bluelink login-voice-link">语音验证码</span></p>\n<div type="button" class="theme-btn-full login-submit">确定</div>\n</form>\n</div>'};return function(e){var l=function(i){var l,t=n.getUser();t.bindLogin(e.find(".main"),function(){i.targetView?e.replaceView.call(e,i.targetView,i.args):e.finishView({isLogin:!0})}),e.delegate(".login-input","focus",function(){clearTimeout(l),e.find(".pic").addClass("pic-hide")}),e.delegate(".login-input","blur",function(){l=setTimeout(function(){e.find(".pic").removeClass("pic-hide")},2e3)}),e.find(".header-icon-back").css("display","block")};return{html:i,init:l}}});